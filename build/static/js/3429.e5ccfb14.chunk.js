"use strict";(self.webpackChunk_abibiman_telehealth=self.webpackChunk_abibiman_telehealth||[]).push([[3429],{13429:function(e,n,t){t.d(n,{o:function(){return L},H2:function(){return G}});var i=t(72791),r=t(38072),o=t(19208),s=(t(83854),t(22459)),a=t(57062),l=(t(80160),t(40268)),c=(t(47974),t(3352),t(60720)),d=t(50933),u=(t(1382),t(17070)),x=(t(52115),t(80184));t(25265);var m=t(89164),h=t(74165),p=t(15861),v=t(8007),f=t(61134),b=t(44695),j=t(12258),Z=t(57621),g=t(36314),y=t(39231),w=t(4942),k=t(1413),C=t(87151),I=t.n(C),S=t(64554),T=t(5849),D=t(94721),P=t(82626),F=t(4567),z=t(55891),N=t(63466);function q(){var e=(0,f.Gc)(),n=e.control,t=e.setValue,r=e.watch,o=e.resetField,s=(0,f.Dq)({control:n,name:"items"}),c=s.fields,d=s.append,m=s.remove,h=r(),p=h.items.map((function(e){return e.quantity*e.price})),v=I()(p),b=v-h.discount-h.shipping+h.taxes;(0,i.useEffect)((function(){t("totalAmount",b)}),[t,b]);var j=(0,i.useCallback)((function(e){o("items[".concat(e,"].quantity")),o("items[".concat(e,"].price")),o("items[".concat(e,"].total"))}),[o]),Z=(0,i.useCallback)((function(e,n){var i;t("items[".concat(e,"].price"),null===(i=a.PI.find((function(e){return e.name===n})))||void 0===i?void 0:i.price),t("items[".concat(e,"].total"),h.items.map((function(e){return e.quantity*e.price}))[e])}),[t,h.items]),C=(0,i.useCallback)((function(e,n){t("items[".concat(n,"].quantity"),Number(e.target.value)),t("items[".concat(n,"].total"),h.items.map((function(e){return e.quantity*e.price}))[n])}),[t,h.items]),q=(0,i.useCallback)((function(e,n){t("items[".concat(n,"].price"),Number(e.target.value)),t("items[".concat(n,"].total"),h.items.map((function(e){return e.quantity*e.price}))[n])}),[t,h.items]),A=(0,x.jsxs)(g.Z,{spacing:2,alignItems:"flex-end",sx:{mt:3,textAlign:"right",typography:"body2"},children:[(0,x.jsxs)(g.Z,{direction:"row",children:[(0,x.jsx)(S.Z,{sx:{color:"text.secondary"},children:"Subtotal"}),(0,x.jsx)(S.Z,{sx:{width:160,typography:"subtitle2"},children:(0,u.e_)(v)||"-"})]}),(0,x.jsxs)(g.Z,{direction:"row",children:[(0,x.jsx)(S.Z,{sx:{color:"text.secondary"},children:"Shipping"}),(0,x.jsx)(S.Z,{sx:(0,k.Z)({width:160},h.shipping&&{color:"error.main"}),children:h.shipping?"- ".concat((0,u.e_)(h.shipping)):"-"})]}),(0,x.jsxs)(g.Z,{direction:"row",children:[(0,x.jsx)(S.Z,{sx:{color:"text.secondary"},children:"Discount"}),(0,x.jsx)(S.Z,{sx:(0,k.Z)({width:160},h.discount&&{color:"error.main"}),children:h.discount?"- ".concat((0,u.e_)(h.discount)):"-"})]}),(0,x.jsxs)(g.Z,{direction:"row",children:[(0,x.jsx)(S.Z,{sx:{color:"text.secondary"},children:"Taxes"}),(0,x.jsx)(S.Z,{sx:{width:160},children:h.taxes?(0,u.e_)(h.taxes):"-"})]}),(0,x.jsxs)(g.Z,{direction:"row",sx:{typography:"subtitle1"},children:[(0,x.jsx)(S.Z,{children:"Total"}),(0,x.jsx)(S.Z,{sx:{width:160},children:(0,u.e_)(b)||"-"})]})]});return(0,x.jsxs)(S.Z,{sx:{p:3},children:[(0,x.jsx)(F.Z,{variant:"h6",sx:{color:"text.disabled",mb:3},children:"Details:"}),(0,x.jsx)(g.Z,{divider:(0,x.jsx)(D.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:c.map((function(e,n){return(0,x.jsxs)(g.Z,{alignItems:"flex-end",spacing:1.5,children:[(0,x.jsxs)(g.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1},children:[(0,x.jsx)(y.au,{size:"small",name:"items[".concat(n,"].title"),label:"Title",InputLabelProps:{shrink:!0}}),(0,x.jsx)(y.au,{size:"small",name:"items[".concat(n,"].description"),label:"Description",InputLabelProps:{shrink:!0}}),(0,x.jsxs)(y.Cc,{name:"items[".concat(n,"].service"),size:"small",label:"Service",InputLabelProps:{shrink:!0},sx:{maxWidth:{md:160}},children:[(0,x.jsx)(P.Z,{value:"",onClick:function(){return j(n)},sx:{fontStyle:"italic",color:"text.secondary"},children:"None"}),(0,x.jsx)(D.Z,{sx:{borderStyle:"dashed"}}),a.PI.map((function(e){return(0,x.jsx)(P.Z,{value:e.name,onClick:function(){return Z(n,e.name)},children:e.name},e.id)}))]}),(0,x.jsx)(y.au,{size:"small",type:"number",name:"items[".concat(n,"].quantity"),label:"Quantity",placeholder:"0",onChange:function(e){return C(e,n)},InputLabelProps:{shrink:!0},sx:{maxWidth:{md:96}}}),(0,x.jsx)(y.au,{size:"small",type:"number",name:"items[".concat(n,"].price"),label:"Price",placeholder:"0.00",onChange:function(e){return q(e,n)},InputProps:{startAdornment:(0,x.jsx)(N.Z,{position:"start",children:(0,x.jsx)(S.Z,{sx:{typography:"subtitle2",color:"text.disabled"},children:"$"})})},sx:{maxWidth:{md:96}}}),(0,x.jsx)(y.au,{disabled:!0,size:"small",type:"number",name:"items[".concat(n,"].total"),label:"Total",placeholder:"0.00",value:0===h.items[n].total?"":h.items[n].total.toFixed(2),onChange:function(e){return q(e,n)},InputProps:{startAdornment:(0,x.jsx)(N.Z,{position:"start",children:(0,x.jsx)(S.Z,{sx:{typography:"subtitle2",color:"text.disabled"},children:"$"})})},sx:(0,w.Z)({maxWidth:{md:104}},"& .".concat(z.Z.input),{textAlign:{md:"right"}})})]}),(0,x.jsx)(T.Z,{size:"small",color:"error",startIcon:(0,x.jsx)(l.Z,{icon:"solar:trash-bin-trash-bold"}),onClick:function(){return function(e){m(e)}(n)},children:"Remove"})]},e.id)}))}),(0,x.jsx)(D.Z,{sx:{my:3,borderStyle:"dashed"}}),(0,x.jsxs)(g.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:[(0,x.jsx)(T.Z,{size:"small",color:"primary",startIcon:(0,x.jsx)(l.Z,{icon:"mingcute:add-line"}),onClick:function(){d({title:"",description:"",service:"",quantity:1,price:0,total:0})},sx:{flexShrink:0},children:"Add Item"}),(0,x.jsxs)(g.Z,{spacing:2,justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{width:1},children:[(0,x.jsx)(y.au,{size:"small",label:"Shipping($)",name:"shipping",type:"number",sx:{maxWidth:{md:120}}}),(0,x.jsx)(y.au,{size:"small",label:"Discount($)",name:"discount",type:"number",sx:{maxWidth:{md:120}}}),(0,x.jsx)(y.au,{size:"small",label:"Taxes(%)",name:"taxes",type:"number",sx:{maxWidth:{md:120}}})]})]}),A]})}var A=t(13400),W=t(38887),_=t(21435);function R(){var e,n=(0,f.Gc)(),t=n.watch,i=n.setValue,r=n.formState.errors,o=(0,W.F)("up","md"),c=t(),d=c.invoiceFrom,u=c.invoiceTo,m=(0,s.k)(),h=(0,s.k)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(g.Z,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},divider:(0,x.jsx)(D.Z,{flexItem:!0,orientation:o?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:[(0,x.jsxs)(g.Z,{sx:{width:1},children:[(0,x.jsxs)(g.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,x.jsx)(F.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"From:"}),(0,x.jsx)(A.Z,{onClick:m.onTrue,children:(0,x.jsx)(l.Z,{icon:"solar:pen-bold"})})]}),(0,x.jsxs)(g.Z,{spacing:1,children:[(0,x.jsx)(F.Z,{variant:"subtitle2",children:d.name}),(0,x.jsx)(F.Z,{variant:"body2",children:d.fullAddress}),(0,x.jsxs)(F.Z,{variant:"body2",children:[" ",d.phoneNumber]})]})]}),(0,x.jsxs)(g.Z,{sx:{width:1},children:[(0,x.jsxs)(g.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,x.jsx)(F.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"To:"}),(0,x.jsx)(A.Z,{onClick:h.onTrue,children:(0,x.jsx)(l.Z,{icon:u?"solar:pen-bold":"mingcute:add-line"})})]}),u?(0,x.jsxs)(g.Z,{spacing:1,children:[(0,x.jsx)(F.Z,{variant:"subtitle2",children:u.name}),(0,x.jsx)(F.Z,{variant:"body2",children:u.fullAddress}),(0,x.jsxs)(F.Z,{variant:"body2",children:[" ",u.phoneNumber]})]}):(0,x.jsx)(F.Z,{typography:"caption",sx:{color:"error.main"},children:null===(e=r.invoiceTo)||void 0===e?void 0:e.message})]})]}),(0,x.jsx)(_.IJ,{title:"Customers",open:m.value,onClose:m.onFalse,selected:function(e){return(null===d||void 0===d?void 0:d.id)===e},onSelect:function(e){return i("invoiceFrom",e)},list:a.PX,action:(0,x.jsx)(T.Z,{size:"small",startIcon:(0,x.jsx)(l.Z,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})}),(0,x.jsx)(_.IJ,{title:"Customers",open:h.value,onClose:h.onFalse,selected:function(e){return(null===u||void 0===u?void 0:u.id)===e},onSelect:function(e){return i("invoiceTo",e)},list:a.PX,action:(0,x.jsx)(T.Z,{size:"small",startIcon:(0,x.jsx)(l.Z,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})})]})}var H=t(53106);function K(){var e=(0,f.Gc)(),n=e.control,t=(0,e.watch)();return(0,x.jsxs)(g.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,bgcolor:"background.neutral"},children:[(0,x.jsx)(y.au,{disabled:!0,name:"invoiceNumber",label:"Invoice number",value:t.invoiceNumber}),(0,x.jsx)(y.Cc,{fullWidth:!0,name:"status",label:"Status",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["paid","pending","overdue","draft"].map((function(e){return(0,x.jsx)(P.Z,{value:e,children:e},e)}))}),(0,x.jsx)(f.Qr,{name:"createDate",control:n,render:function(e){var n=e.field,t=e.fieldState.error;return(0,x.jsx)(H.M,{label:"Date create",value:n.value,onChange:function(e){n.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}}),(0,x.jsx)(f.Qr,{name:"dueDate",control:n,render:function(e){var n=e.field,t=e.fieldState.error;return(0,x.jsx)(H.M,{label:"Due date",value:n.value,onChange:function(e){n.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!t,helperText:null===t||void 0===t?void 0:t.message}}})}})]})}function $(e){var n=e.currentInvoice,t=(0,o.tv)(),l=(0,s.k)(),c=(0,s.k)(),d=v.Ry().shape({invoiceTo:v.nK().nullable().required("Invoice to is required"),createDate:v.nK().nullable().required("Create date is required"),dueDate:v.nK().required("Due date is required").test("date-min","Due date must be later than create date",(function(e,n){var t=n.parent;return e.getTime()>t.createDate.getTime()})),taxes:v.Rx(),status:v.Z_(),discount:v.Rx(),shipping:v.Rx(),invoiceFrom:v.nK(),totalAmount:v.Rx(),invoiceNumber:v.Z_()}),u=(0,i.useMemo)((function(){return{invoiceNumber:(null===n||void 0===n?void 0:n.invoiceNumber)||"INV-1990",createDate:(null===n||void 0===n?void 0:n.createDate)||new Date,dueDate:(null===n||void 0===n?void 0:n.dueDate)||null,taxes:(null===n||void 0===n?void 0:n.taxes)||0,shipping:(null===n||void 0===n?void 0:n.shipping)||0,status:(null===n||void 0===n?void 0:n.status)||"draft",discount:(null===n||void 0===n?void 0:n.discount)||0,invoiceFrom:(null===n||void 0===n?void 0:n.invoiceFrom)||a.PX[0],invoiceTo:(null===n||void 0===n?void 0:n.invoiceTo)||null,items:(null===n||void 0===n?void 0:n.items)||[{title:"",description:"",service:"",quantity:1,price:0,total:0}],totalAmount:(null===n||void 0===n?void 0:n.totalAmount)||0}}),[n]),m=(0,f.cI)({resolver:(0,b.X)(d),defaultValues:u}),w=m.reset,k=m.handleSubmit,C=m.formState.isSubmitting,I=k(function(){var e=(0,p.Z)((0,h.Z)().mark((function e(n){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.onTrue(),e.prev=1,e.next=4,new Promise((function(e){return setTimeout(e,500)}));case 4:w(),l.onFalse(),t.push(r.H.dashboard.invoice.root),console.info("DATA",JSON.stringify(n,null,2)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),l.onFalse();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}()),S=k(function(){var e=(0,p.Z)((0,h.Z)().mark((function e(n){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.onTrue(),e.prev=1,e.next=4,new Promise((function(e){return setTimeout(e,500)}));case 4:w(),c.onFalse(),t.push(r.H.dashboard.invoice.root),console.info("DATA",JSON.stringify(n,null,2)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),c.onFalse();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}());return(0,x.jsxs)(y.ZP,{methods:m,children:[(0,x.jsxs)(Z.Z,{children:[(0,x.jsx)(R,{}),(0,x.jsx)(K,{}),(0,x.jsx)(q,{})]}),(0,x.jsxs)(g.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:[(0,x.jsx)(j.Z,{color:"inherit",size:"large",variant:"outlined",loading:l.value&&C,onClick:I,children:"Save as Draft"}),(0,x.jsxs)(j.Z,{size:"large",variant:"contained",loading:c.value&&C,onClick:S,children:[n?"Update":"Create"," & Send"]})]})]})}function G(e){var n=e.id,t=(0,c.K$)(),i=a.Ot.find((function(e){return e.id===n}));return(0,x.jsxs)(m.Z,{maxWidth:!t.themeStretch&&"lg",children:[(0,x.jsx)(d.Z,{heading:"Edit",links:[{name:"Dashboard",href:r.H.dashboard.root},{name:"Invoice",href:r.H.dashboard.invoice.root},{name:null===i||void 0===i?void 0:i.invoiceNumber}],sx:{mb:{xs:3,md:5}}}),(0,x.jsx)($,{currentInvoice:i})]})}function L(){var e=(0,c.K$)();return(0,x.jsxs)(m.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,x.jsx)(d.Z,{heading:"Create a new invoice",links:[{name:"Dashboard",href:r.H.dashboard.root},{name:"Invoice",href:r.H.dashboard.invoice.root},{name:"New Invoice"}],sx:{mb:{xs:3,md:5}}}),(0,x.jsx)($,{})]})}var J=t(66934),V=t(9195);t(96851).Zx.register({family:"Roboto",fonts:[{src:"/fonts/Roboto-Regular.ttf"},{src:"/fonts/Roboto-Bold.ttf"}]});(0,J.ZP)(V.Z)((function(e){var n=e.theme;return{"& td":{textAlign:"right",borderBottom:"none",paddingTop:n.spacing(1),paddingBottom:n.spacing(1)}}}))}}]);
//# sourceMappingURL=3429.e5ccfb14.chunk.js.map