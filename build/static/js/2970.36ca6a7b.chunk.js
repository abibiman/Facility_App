"use strict";(self.webpackChunk_abibiman_telehealth=self.webpackChunk_abibiman_telehealth||[]).push([[2970],{75825:function(e,t,n){n.d(t,{o:function(){return Ye},H2:function(){return Xe},Mb:function(){return Ne}});var r=n(74165),i=n(1413),l=n(15861),s=n(29439),o=n(72791),a=n(5849),c=n(89164),d=n(38072),u=n(83854),x=n(60720),h=n(50933),p=n(8976),m=n(57459),g=n(5574),f=n(39157),j=n(64554),v=n(4567),b=n(97123),Z=n.p+"static/media/earning.6635d5ea67d163781d5b.jpg",y=n(12258),w=n(2102),C=n(32869),D=n(80184);function P(e){var t=e.openDialog,n=e.setOpenDialog,i=e.data,a=function(){return n(!1)},c=(0,o.useState)(!1),d=(0,s.Z)(c,2),u=d[0],x=d[1],h=(0,C.Ds)().enqueueSnackbar,P=((0,p.E)(m.Vo).user||"").facilityID,S=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,w.Z.post("/transactions/labs/payout",{facilityID:P});case 4:h("Payout request successful"),a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,x(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,D.jsxs)(g.Z,{open:!!t,onClose:a,children:[(0,D.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:{xs:"100%",sm:"425px"},pb:5},children:[(0,D.jsx)(j.Z,{component:"img",src:Z,alt:"mission",sx:{mx:"auto",my:"15px",width:{xs:"100%",sm:250},height:{xs:"100%",sm:250},borderRadius:"50%"}}),(0,D.jsxs)(v.Z,{variant:"body1",textAlign:"center",children:["Net Amount (after 20% deduction) ",(0,D.jsx)("br",{}),(0,D.jsxs)("span",{style:{fontWeight:700,fontSize:"18px"},children:["GH\u20b5 ",null===i||void 0===i?void 0:i.amount]})]})]}),(0,D.jsx)(b.Z,{children:(0,D.jsx)(y.Z,{loading:u,onClick:S,variant:"contained",color:"primary",children:"Proceed"})})]})}var S=n(4942),R=n(31357),k=n.n(R),G=n(13967),I=n(12065),T=n(61474),_=n(2101),F=n(57621),W=n(79836),A=n(36314),E=n(94721),N=n(20068),O=n(53382),z=n(13400),q=n(39281),B=n(19208),H=n(22459),L=n(9145),V=n(57062),$=n(80160),K=n(40268),M=n(47974),Q=(n(3352),n(1382)),U=n(17070),J=n(32471);function X(e){var t=e.title,n=e.total,r=e.icon,i=(e.color,e.percent,e.price);return(0,D.jsxs)(A.Z,{spacing:2.5,direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:200},children:[(0,D.jsx)(A.Z,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:(0,D.jsx)(J.Z,{alt:t,src:r,height:45,width:45})}),(0,D.jsxs)(A.Z,{spacing:.5,children:[(0,D.jsx)(v.Z,{variant:"subtitle1",children:t}),(0,D.jsxs)(j.Z,{component:"span",sx:{color:"text.disabled",typography:"body2"},children:[(0,U.v1)(n)," lab orders"]}),(0,D.jsxs)(v.Z,{variant:"subtitle2",children:["GH\u20b5 ",(0,U.e_)(i)]})]})]})}var Y=n(53106),ee=n(82626),te=n(48550),ne=n(63466),re=n(52115),ie=n(96851);ie.Zx.register({family:"Roboto",fonts:[{src:"/fonts/Roboto-Regular.ttf"},{src:"/fonts/Roboto-Bold.ttf"}]});var le=function(){return(0,o.useMemo)((function(){return ie.mM.create({col4:{width:"25%"},col8:{width:"75%"},col6:{width:"50%"},mb4:{marginBottom:4},mb8:{marginBottom:8},mb40:{marginBottom:40},h3:{fontSize:16,fontWeight:700},h4:{fontSize:13,fontWeight:700},body1:{fontSize:10},body2:{fontSize:9},subtitle1:{fontSize:10,fontWeight:700},subtitle2:{fontSize:9,fontWeight:700},alignRight:{textAlign:"right"},page:{fontSize:9,lineHeight:1.6,fontFamily:"Roboto",backgroundColor:"#FFFFFF",textTransform:"capitalize",padding:"40px 24px 120px 24px"},footer:{left:0,right:0,bottom:0,padding:24,margin:"auto",borderTopWidth:1,borderStyle:"solid",position:"absolute",borderColor:"#DFE3E8"},gridContainer:{flexDirection:"row",justifyContent:"space-between"},table:{display:"flex",width:"auto"},tableRow:{padding:"8px 0",flexDirection:"row",borderBottomWidth:1,borderStyle:"solid",borderColor:"#DFE3E8"},noBorder:{paddingTop:8,paddingBottom:0,borderBottomWidth:0},tableCell_1:{width:"5%"},tableCell_2:{width:"50%",paddingRight:16},tableCell_3:{width:"15%"}})}),[])};function se(e){var t=e.invoice,n=e.currentStatus,r=t.items,i=t.taxes,l=t.dueDate,s=t.discount,o=t.shipping,a=t.invoiceTo,c=t.createDate,d=t.totalAmount,u=t.invoiceFrom,x=t.invoiceNumber,h=t.subTotal,p=le();return(0,D.jsx)(ie.BB,{children:(0,D.jsxs)(ie.T3,{size:"A4",style:p.page,children:[(0,D.jsxs)(ie.G7,{style:[p.gridContainer,p.mb40],children:[(0,D.jsx)(ie.Ee,{source:"../../components/logo/logo-icon.png",style:{width:48,height:48}}),(0,D.jsxs)(ie.G7,{style:{alignItems:"flex-end",flexDirection:"column"},children:[(0,D.jsx)(ie.xv,{style:p.h3,children:n}),(0,D.jsxs)(ie.xv,{children:[" ",x," "]})]})]}),(0,D.jsxs)(ie.G7,{style:[p.gridContainer,p.mb40],children:[(0,D.jsxs)(ie.G7,{style:p.col6,children:[(0,D.jsx)(ie.xv,{style:[p.subtitle2,p.mb4],children:"Invoice from"}),(0,D.jsx)(ie.xv,{style:p.body2,children:u.name}),(0,D.jsx)(ie.xv,{style:p.body2,children:u.fullAddress}),(0,D.jsx)(ie.xv,{style:p.body2,children:u.phoneNumber})]}),(0,D.jsxs)(ie.G7,{style:p.col6,children:[(0,D.jsx)(ie.xv,{style:[p.subtitle2,p.mb4],children:"Invoice to"}),(0,D.jsx)(ie.xv,{style:p.body2,children:a.name}),(0,D.jsx)(ie.xv,{style:p.body2,children:a.fullAddress}),(0,D.jsx)(ie.xv,{style:p.body2,children:a.phoneNumber})]})]}),(0,D.jsxs)(ie.G7,{style:[p.gridContainer,p.mb40],children:[(0,D.jsxs)(ie.G7,{style:p.col6,children:[(0,D.jsx)(ie.xv,{style:[p.subtitle2,p.mb4],children:"Date create"}),(0,D.jsx)(ie.xv,{style:p.body2,children:(0,L.Mu)(c)})]}),(0,D.jsxs)(ie.G7,{style:p.col6,children:[(0,D.jsx)(ie.xv,{style:[p.subtitle2,p.mb4],children:"Due date"}),(0,D.jsx)(ie.xv,{style:p.body2,children:(0,L.Mu)(l)})]})]}),(0,D.jsx)(ie.xv,{style:[p.subtitle1,p.mb8],children:"Invoice Details"}),(0,D.jsxs)(ie.G7,{style:p.table,children:[(0,D.jsx)(ie.G7,{children:(0,D.jsxs)(ie.G7,{style:p.tableRow,children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1,children:(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"#"})}),(0,D.jsx)(ie.G7,{style:p.tableCell_2,children:(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"Description"})}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"Qty"})}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"Unit price"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"Total"})})]})}),(0,D.jsxs)(ie.G7,{children:[r.map((function(e,t){return(0,D.jsxs)(ie.G7,{style:p.tableRow,children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1,children:(0,D.jsx)(ie.xv,{children:t+1})}),(0,D.jsxs)(ie.G7,{style:p.tableCell_2,children:[(0,D.jsx)(ie.xv,{style:p.subtitle2,children:e.title}),(0,D.jsx)(ie.xv,{children:e.description})]}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:e.quantity})}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:e.price})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{children:(0,U.e_)(e.price*e.quantity)})})]},e.id)})),(0,D.jsxs)(ie.G7,{style:[p.tableRow,p.noBorder],children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1}),(0,D.jsx)(ie.G7,{style:p.tableCell_2}),(0,D.jsx)(ie.G7,{style:p.tableCell_3}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:"Subtotal"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{children:(0,U.e_)(h)})})]}),(0,D.jsxs)(ie.G7,{style:[p.tableRow,p.noBorder],children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1}),(0,D.jsx)(ie.G7,{style:p.tableCell_2}),(0,D.jsx)(ie.G7,{style:p.tableCell_3}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:"Shipping"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{children:(0,U.e_)(-o)})})]}),(0,D.jsxs)(ie.G7,{style:[p.tableRow,p.noBorder],children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1}),(0,D.jsx)(ie.G7,{style:p.tableCell_2}),(0,D.jsx)(ie.G7,{style:p.tableCell_3}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:"Discount"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{children:(0,U.e_)(-s)})})]}),(0,D.jsxs)(ie.G7,{style:[p.tableRow,p.noBorder],children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1}),(0,D.jsx)(ie.G7,{style:p.tableCell_2}),(0,D.jsx)(ie.G7,{style:p.tableCell_3}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{children:"Taxes"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{children:(0,U.e_)(i)})})]}),(0,D.jsxs)(ie.G7,{style:[p.tableRow,p.noBorder],children:[(0,D.jsx)(ie.G7,{style:p.tableCell_1}),(0,D.jsx)(ie.G7,{style:p.tableCell_2}),(0,D.jsx)(ie.G7,{style:p.tableCell_3}),(0,D.jsx)(ie.G7,{style:p.tableCell_3,children:(0,D.jsx)(ie.xv,{style:p.h4,children:"Total"})}),(0,D.jsx)(ie.G7,{style:[p.tableCell_3,p.alignRight],children:(0,D.jsx)(ie.xv,{style:p.h4,children:(0,U.e_)(d)})})]})]})]}),(0,D.jsxs)(ie.G7,{style:[p.gridContainer,p.footer],fixed:!0,children:[(0,D.jsxs)(ie.G7,{style:p.col8,children:[(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"NOTES"}),(0,D.jsx)(ie.xv,{children:"We appreciate your business. Should you need us to add VAT or extra notes let us know!"})]}),(0,D.jsxs)(ie.G7,{style:[p.col4,p.alignRight],children:[(0,D.jsx)(ie.xv,{style:p.subtitle2,children:"Have a Question?"}),(0,D.jsx)(ie.xv,{children:"support@abcapp.com"})]})]})]})})}function oe(e){var t=e.filters,n=e.onFilters,r=e.dateError,i=(e.serviceOptions,(0,re.S)()),l=(0,o.useCallback)((function(e){n("name",e.target.value)}),[n]),s=((0,o.useCallback)((function(e){n("service","string"===typeof e.target.value?e.target.value.split(","):e.target.value)}),[n]),(0,o.useCallback)((function(e){n("startDate",e)}),[n])),c=(0,o.useCallback)((function(e){n("endDate",e)}),[n]),d=(0,H.k)(),u=V.Ot.filter((function(e){return"e99f09a7-dd88-49d5-b1c8-1daf80c2d7b20"===e.id}))[0];return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(A.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,D.jsx)(Y.M,{label:"Start date",value:t.startDate,onChange:s,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),(0,D.jsx)(Y.M,{label:"End date",value:t.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:r}},sx:{maxWidth:{md:180}}}),(0,D.jsxs)(A.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,D.jsx)(te.Z,{fullWidth:!0,value:t.name,onChange:l,placeholder:"Search customer or invoice number...",InputProps:{startAdornment:(0,D.jsx)(ne.Z,{position:"start",children:(0,D.jsx)(K.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,D.jsx)(z.Z,{onClick:i.onOpen,children:(0,D.jsx)(K.Z,{icon:"eva:more-vertical-fill"})})]})]}),(0,D.jsxs)(re.Z,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:"auto"},children:[(0,D.jsxs)(ee.Z,{onClick:function(){i.onClose(),d.onTrue()},children:[(0,D.jsx)(K.Z,{icon:"carbon:view-filled"}),"View"]}),(0,D.jsx)(ie.WD,{document:(0,D.jsx)(se,{invoice:u,currentStatus:"paid"}),fileName:u.invoiceNumber,style:{textDecoration:"none",color:"#000"},children:(0,D.jsxs)(ee.Z,{onClick:function(){i.onClose()},children:[(0,D.jsx)(K.Z,{icon:"vscode-icons:file-type-pdf2"}),"Download PDF"]})})]}),(0,D.jsx)(g.Z,{fullScreen:!0,open:d.value,children:(0,D.jsxs)(j.Z,{sx:{height:1,display:"flex",flexDirection:"column"},children:[(0,D.jsx)(b.Z,{sx:{p:1.5},children:(0,D.jsx)(a.Z,{color:"inherit",variant:"contained",onClick:d.onFalse,children:"Close"})}),(0,D.jsx)(j.Z,{sx:{flexGrow:1,height:1,overflow:"hidden"},children:(0,D.jsx)(ie.Z$,{width:"100%",height:"100%",style:{border:"none"},children:(0,D.jsx)(se,{invoice:u,currentStatus:"paid"})})})]})})]})}var ae=n(45987),ce=n(85771),de=n(27938),ue=n(25265),xe=["filters","onFilters","onResetFilters","results"],he=["label","children","sx"];function pe(e){var t=e.filters,n=e.onFilters,r=e.onResetFilters,l=e.results,s=(0,ae.Z)(e,xe),o=(0,ue.l2)(t.startDate,t.endDate);return(0,D.jsxs)(A.Z,(0,i.Z)((0,i.Z)({spacing:1.5},s),{},{children:[(0,D.jsxs)(j.Z,{sx:{typography:"body2"},children:[(0,D.jsx)("strong",{children:l}),(0,D.jsx)(j.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,D.jsxs)(A.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!t.service.length&&(0,D.jsx)(me,{label:"Service:",children:t.service.map((function(e){return(0,D.jsx)(ce.Z,{label:e,size:"small",onDelete:function(){return function(e){var r=t.service.filter((function(t){return t!==e}));n("service",r)}(e)}},e)}))}),"all"!==t.status&&(0,D.jsx)(me,{label:"Status:",children:(0,D.jsx)(ce.Z,{size:"small",label:t.status,onDelete:function(){n("status","all")}})}),t.startDate&&t.endDate&&(0,D.jsx)(me,{label:"Date:",children:(0,D.jsx)(ce.Z,{size:"small",label:o,onDelete:function(){n("startDate",null),n("endDate",null)}})}),(0,D.jsx)(a.Z,{color:"error",onClick:r,startIcon:(0,D.jsx)(K.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]}))}function me(e){var t=e.label,n=e.children,r=e.sx,l=(0,ae.Z)(e,he);return(0,D.jsxs)(A.Z,(0,i.Z)((0,i.Z)({component:de.Z,variant:"outlined",spacing:1,direction:"row",sx:(0,i.Z)({p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed"},r)},l),{},{children:[(0,D.jsx)(j.Z,{component:"span",sx:{typography:"subtitle2"},children:t}),(0,D.jsx)(A.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:n})]}))}var ge=n(16386),fe=n(50533),je=n(60220),ve=n(9195),be=n(68745),Ze=n(49900);function ye(e){var t=e.row,n=e.selected,r=(e.onSelectRow,e.onViewRow),i=(e.onEditRow,e.onDeleteRow,t.patientName),l=t.appointmentDate,s=t.appointmentType,o=t.price,a=t.userID;(0,H.k)(),(0,re.S)();return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(ve.Z,{hover:!0,selected:n,children:[(0,D.jsxs)(be.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,D.jsx)(je.Z,{alt:i,sx:{mr:2},children:i.charAt(0).toUpperCase()}),(0,D.jsx)(Ze.Z,{disableTypography:!0,primary:(0,D.jsx)(v.Z,{variant:"body2",noWrap:!0,children:i}),secondary:(0,D.jsx)(fe.Z,{noWrap:!0,variant:"body2",onClick:r,sx:{color:"text.disabled",cursor:"pointer"},children:a})})]}),(0,D.jsx)(be.Z,{children:(0,D.jsx)(Ze.Z,{primary:(0,ge.Z)(new Date(l),"dd MMM yyyy"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,D.jsx)(be.Z,{children:s}),(0,D.jsx)(be.Z,{children:(0,U.e_)(o)})]})})}var we=n.p+"static/media/net.a70ab1e6157ca99613f3.png",Ce=n.p+"static/media/total.b6ddfa0f1616c19b6563.png",De=n.p+"static/media/deduction.ab82f983119aac09b0e7.png",Pe=[{id:"patient",label:"Patient Name"},{id:"createDate",label:"Appointment Date"},{id:"type",label:"Appointment Type"},{id:"price",label:"Amount (GH\u20b5)"}],Se={name:"",service:[],status:"all",startDate:null,endDate:null};function Re(e){var t=e.data,n=e.extraData,r=(0,G.Z)(),l=(0,x.K$)(),a=(0,B.tv)(),u=(0,Q.x6)({defaultOrderBy:"createDate"}),h=(0,H.k)(),g=((0,p.E)(m.Vo).user.providerID,(0,o.useState)(t)),f=(0,s.Z)(g,2),j=f[0],v=f[1],b=(0,o.useState)(n),Z=(0,s.Z)(b,2),y=Z[0],w=(Z[1],(0,o.useState)(Se)),C=(0,s.Z)(w,2),P=C[0],R=C[1],k=(P.startDate,P.endDate,!(!P.startDate||!P.endDate)&&P.startDate.getTime()>P.endDate.getTime()),U=function(e){var t=e.inputData,n=e.comparator,r=e.filters,i=e.dateError,l=r.name,s=r.status,o=r.service,a=r.startDate,c=r.endDate,d=t.map((function(e,t){return[e,t]}));d.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=d.map((function(e){return e[0]})),l&&(t=t.filter((function(e){return-1!==e.invoiceNumber.toLowerCase().indexOf(l.toLowerCase())||-1!==e.invoiceTo.name.toLowerCase().indexOf(l.toLowerCase())})));"all"!==s&&(t=t.filter((function(e){return e.status===s})));o.length&&(t=t.filter((function(e){return e.items.some((function(e){return o.includes(e.service)}))})));i||a&&c&&(t=t.filter((function(e){return(0,L.IO)(e.appointmentDate)>=(0,L.IO)(a)&&(0,L.IO)(e.appointmentDate)<=(0,L.IO)(c)})));return t}({inputData:j,comparator:(0,Q.sQ)(u.order,u.orderBy),filters:P,dateError:k}),J=U.slice(u.page*u.rowsPerPage,u.page*u.rowsPerPage+u.rowsPerPage),Y=u.dense?56:76,ee=!!P.name||!!P.service.length||"all"!==P.status||!!P.startDate&&!!P.endDate,te=!U.length&&ee||!U.length,ne=function(e){return j.filter((function(t){return t.status===e})).length},re=[{value:"all",label:"All",color:"default",count:j.length},{value:"paid",label:"Paid",color:"success",count:ne("paid")},{value:"pending",label:"Pending",color:"warning",count:ne("pending")},{value:"overdue",label:"Overdue",color:"error",count:ne("overdue")},{value:"draft",label:"Draft",color:"default",count:ne("draft")}],ie=(0,o.useCallback)((function(e,t){u.onResetPage(),R((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,S.Z)({},e,t))}))}),[u]),le=(0,o.useCallback)((function(e){var t=j.filter((function(t){return t.id!==e}));v(t),u.onUpdatePageDeleteRow(J.length)}),[J.length,u,j]),se=((0,o.useCallback)((function(){var e=j.filter((function(e){return!u.selected.includes(e.id)}));v(e),u.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:J.length,totalRowsFiltered:U.length})}),[U.length,J.length,u,j]),(0,o.useCallback)((function(e){a.push(d.H.dashboard.invoice.edit(e))}),[a])),ae=(0,o.useCallback)((function(e){a.push(d.H.dashboard.invoice.details(e))}),[a]),ce=(0,o.useCallback)((function(e,t){ie("status",t)}),[ie]),de=(0,o.useCallback)((function(){R(Se)}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(c.Z,{maxWidth:!l.themeStretch&&"lg",children:[(0,D.jsx)(F.Z,{sx:{mb:{xs:3,md:5}},children:(0,D.jsx)(M.Z,{children:(0,D.jsxs)(A.Z,{direction:"row",divider:(0,D.jsx)(E.Z,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[(0,D.jsx)(X,{title:"Gross Earnings",total:j.length,percent:100,price:null===y||void 0===y?void 0:y.total,icon:Ce,color:r.palette.primary.main}),(0,D.jsx)(X,{title:"Total Deduction",percent:20,price:null===y||void 0===y?void 0:y.charges,icon:De,color:r.palette.info.main}),(0,D.jsx)(X,{title:"Net Earnings",percent:80,price:null===y||void 0===y?void 0:y.amount,icon:we,color:r.palette.success.main})]})})}),(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(_.Z,{value:P.status,onChange:ce,sx:{px:2.5,boxShadow:"inset 0 -2px 0 0 ".concat((0,I.Fq)(r.palette.grey[500],.08))},children:re.map((function(e){return(0,D.jsx)(T.Z,{value:e.value,label:e.label,iconPosition:"end",icon:(0,D.jsx)($.Z,{variant:"all"===e.value||e.value===P.status?"filled":"soft",color:e.color,children:e.count})},e.value)}))}),(0,D.jsx)(oe,{filters:P,onFilters:ie,dateError:k,serviceOptions:V.PI.map((function(e){return e.name}))}),ee&&(0,D.jsx)(pe,{filters:P,onFilters:ie,onResetFilters:de,results:U.length,sx:{p:2.5,pt:0}}),(0,D.jsxs)(q.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,D.jsx)(Q.Z4,{dense:u.dense,numSelected:u.selected.length,rowCount:j.length,onSelectAllRows:function(e){return u.onSelectAllRows(e,j.map((function(e){return e.id})))},action:(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(N.Z,{title:"Sent",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"iconamoon:send-fill"})})}),(0,D.jsx)(N.Z,{title:"Download",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"eva:download-outline"})})}),(0,D.jsx)(N.Z,{title:"Print",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"solar:printer-minimalistic-bold"})})}),(0,D.jsx)(N.Z,{title:"Delete",children:(0,D.jsx)(z.Z,{color:"primary",onClick:h.onTrue,children:(0,D.jsx)(K.Z,{icon:"solar:trash-bin-trash-bold"})})})]})}),(0,D.jsx)(M.Z,{children:(0,D.jsxs)(W.Z,{size:u.dense?"small":"medium",sx:{minWidth:800},children:[(0,D.jsx)(Q.K,{order:u.order,orderBy:u.orderBy,headLabel:Pe,rowCount:j.length,numSelected:u.selected.length,onSort:u.onSort,onSelectAllRows:function(e){return u.onSelectAllRows(e,j.map((function(e){return e.id})))}}),(0,D.jsxs)(O.Z,{children:[U.slice(u.page*u.rowsPerPage,u.page*u.rowsPerPage+u.rowsPerPage).map((function(e){return(0,D.jsx)(ye,{row:e,selected:u.selected.includes(e.id),onSelectRow:function(){return u.onSelectRow(e.id)},onViewRow:function(){return ae(e.id)},onEditRow:function(){return se(e.id)},onDeleteRow:function(){return le(e.id)}},e.id)})),(0,D.jsx)(Q.$W,{height:Y,emptyRows:(0,Q.fQ)(u.page,u.rowsPerPage,j.length)}),(0,D.jsx)(Q.et,{notFound:te})]})]})})]}),(0,D.jsx)(Q.S_,{count:U.length,page:u.page,rowsPerPage:u.rowsPerPage,onPageChange:u.onChangePage,onRowsPerPageChange:u.onChangeRowsPerPage,dense:u.dense,onChangeDense:u.onChangeDense})]})]})})}function ke(e){var t=e.row,n=e.selected,r=(e.onSelectRow,e.onViewRow,e.onEditRow,e.onDeleteRow,t.type),i=(t.appointmentDate,t.total),l=t.charges,s=t.amount,o=t.status;(0,H.k)(),(0,re.S)();return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(ve.Z,{hover:!0,selected:n,children:[(0,D.jsx)(be.Z,{sx:{display:"flex",alignItems:"center"},children:(0,D.jsx)(Ze.Z,{disableTypography:!0,primary:(0,D.jsx)(v.Z,{variant:"body2",noWrap:!0,sx:{textTransform:"capitalize"},children:r})})}),(0,D.jsx)(be.Z,{children:(0,D.jsx)(Ze.Z,{appointmentDate:!0,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,D.jsx)(be.Z,{children:(0,U.e_)(i)}),(0,D.jsx)(be.Z,{children:(0,U.e_)(l)}),(0,D.jsx)(be.Z,{children:(0,U.e_)(s)}),(0,D.jsx)(be.Z,{children:(0,D.jsx)($.Z,{variant:"soft",color:("approved"===o?"success":"pending"===o&&"warning")||"cancelled"===o&&"error"||"default",children:o})})]})})}var Ge=[{id:"service",label:"Service Type"},{id:"createDate",label:"Request Date"},{id:"gross",label:"Gross Earning (GH\u20b5)"},{id:"charge",label:"Charge (GH\u20b5)"},{id:"net",label:"Net Earning (GH\u20b5)"},{id:"status",label:"Status"}],Ie={name:"",service:[],status:"all",startDate:null,endDate:null};function Te(){var e=(0,G.Z)(),t=(0,x.K$)(),n=(0,B.tv)(),a=(0,Q.x6)({defaultOrderBy:"createDate"}),u=(0,H.k)(),h=(0,p.E)(m.Vo).user,g=(0,o.useState)([]),f=(0,s.Z)(g,2),j=f[0],v=f[1],b=(0,o.useState)({}),Z=(0,s.Z)(b,2),y=(Z[0],Z[1],(0,o.useState)(Ie)),C=(0,s.Z)(y,2),P=C[0],R=C[1],U=(P.startDate,P.endDate,function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("/transactions/labs/requested/".concat(null===h||void 0===h?void 0:h.providerID));case 2:t=e.sent,n=t.data,v(null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,o.useEffect)((function(){U()}),[null===h||void 0===h?void 0:h.providerID]);var J=j.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{total:Number(e.total),charges:Number(e.charges),amount:Number(e.amount)})}));console.log(J);var Y=k()(J,"total"),ee=k()(J,"charges"),te=k()(J,"amount");console.log(Y,ee,te);var ne=!(!P.startDate||!P.endDate)&&P.startDate.getTime()>P.endDate.getTime(),re=function(e){var t=e.inputData,n=e.comparator,r=e.filters,i=e.dateError,l=r.name,s=r.status,o=r.service,a=r.startDate,c=r.endDate,d=t.map((function(e,t){return[e,t]}));d.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=d.map((function(e){return e[0]})),l&&(t=t.filter((function(e){return-1!==e.invoiceNumber.toLowerCase().indexOf(l.toLowerCase())||-1!==e.invoiceTo.name.toLowerCase().indexOf(l.toLowerCase())})));"all"!==s&&(t=t.filter((function(e){return e.status===s})));o.length&&(t=t.filter((function(e){return e.items.some((function(e){return o.includes(e.service)}))})));i||a&&c&&(t=t.filter((function(e){return(0,L.IO)(e.appointmentDate)>=(0,L.IO)(a)&&(0,L.IO)(e.appointmentDate)<=(0,L.IO)(c)})));return t}({inputData:j,comparator:(0,Q.sQ)(a.order,a.orderBy),filters:P,dateError:ne}),ie=re.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),le=a.dense?56:76,se=!!P.name||!!P.service.length||"all"!==P.status||!!P.startDate&&!!P.endDate,ae=!re.length&&se||!re.length,ce=function(e){return j.filter((function(t){return t.status===e})).length},de=[{value:"all",label:"All",color:"default",count:j.length},{value:"paid",label:"Paid",color:"success",count:ce("paid")},{value:"pending",label:"Pending",color:"warning",count:ce("pending")},{value:"overdue",label:"Overdue",color:"error",count:ce("overdue")},{value:"draft",label:"Draft",color:"default",count:ce("draft")}],ue=(0,o.useCallback)((function(e,t){a.onResetPage(),R((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,S.Z)({},e,t))}))}),[a]),xe=(0,o.useCallback)((function(e){var t=j.filter((function(t){return t.id!==e}));v(t),a.onUpdatePageDeleteRow(ie.length)}),[ie.length,a,j]),he=((0,o.useCallback)((function(){var e=j.filter((function(e){return!a.selected.includes(e.id)}));v(e),a.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:ie.length,totalRowsFiltered:re.length})}),[re.length,ie.length,a,j]),(0,o.useCallback)((function(e){n.push(d.H.dashboard.invoice.edit(e))}),[n])),me=(0,o.useCallback)((function(e){n.push(d.H.dashboard.invoice.details(e))}),[n]),ge=(0,o.useCallback)((function(e,t){ue("status",t)}),[ue]),fe=(0,o.useCallback)((function(){R(Ie)}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(c.Z,{maxWidth:!t.themeStretch&&"lg",children:[(0,D.jsx)(F.Z,{sx:{mb:{xs:3,md:5}},children:(0,D.jsx)(M.Z,{children:(0,D.jsxs)(A.Z,{direction:"row",divider:(0,D.jsx)(E.Z,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[(0,D.jsx)(X,{title:"Gross Earnings",total:j.length,percent:100,price:Y,icon:Ce,color:e.palette.primary.main}),(0,D.jsx)(X,{title:"Total Deduction",percent:20,price:ee,icon:De,color:e.palette.info.main}),(0,D.jsx)(X,{title:"Net Earnings",percent:80,price:te,icon:we,color:e.palette.success.main})]})})}),(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(_.Z,{value:P.status,onChange:ge,sx:{px:2.5,boxShadow:"inset 0 -2px 0 0 ".concat((0,I.Fq)(e.palette.grey[500],.08))},children:de.map((function(e){return(0,D.jsx)(T.Z,{value:e.value,label:e.label,iconPosition:"end",icon:(0,D.jsx)($.Z,{variant:"all"===e.value||e.value===P.status?"filled":"soft",color:e.color,children:e.count})},e.value)}))}),(0,D.jsx)(oe,{filters:P,onFilters:ue,dateError:ne,serviceOptions:V.PI.map((function(e){return e.name}))}),se&&(0,D.jsx)(pe,{filters:P,onFilters:ue,onResetFilters:fe,results:re.length,sx:{p:2.5,pt:0}}),(0,D.jsxs)(q.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,D.jsx)(Q.Z4,{dense:a.dense,numSelected:a.selected.length,rowCount:j.length,onSelectAllRows:function(e){return a.onSelectAllRows(e,j.map((function(e){return e.id})))},action:(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(N.Z,{title:"Sent",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"iconamoon:send-fill"})})}),(0,D.jsx)(N.Z,{title:"Download",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"eva:download-outline"})})}),(0,D.jsx)(N.Z,{title:"Print",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"solar:printer-minimalistic-bold"})})}),(0,D.jsx)(N.Z,{title:"Delete",children:(0,D.jsx)(z.Z,{color:"primary",onClick:u.onTrue,children:(0,D.jsx)(K.Z,{icon:"solar:trash-bin-trash-bold"})})})]})}),(0,D.jsx)(M.Z,{children:(0,D.jsxs)(W.Z,{size:a.dense?"small":"medium",sx:{minWidth:800},children:[(0,D.jsx)(Q.K,{order:a.order,orderBy:a.orderBy,headLabel:Ge,rowCount:j.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:function(e){return a.onSelectAllRows(e,j.map((function(e){return e.id})))}}),(0,D.jsxs)(O.Z,{children:[re.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map((function(e){return(0,D.jsx)(ke,{row:e,selected:a.selected.includes(e.id),onSelectRow:function(){return a.onSelectRow(e.id)},onViewRow:function(){return me(e.id)},onEditRow:function(){return he(e.id)},onDeleteRow:function(){return xe(e.id)}},e.id)})),(0,D.jsx)(Q.$W,{height:le,emptyRows:(0,Q.fQ)(a.page,a.rowsPerPage,j.length)}),(0,D.jsx)(Q.et,{notFound:ae})]})]})})]}),(0,D.jsx)(Q.S_,{count:re.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,dense:a.dense,onChangeDense:a.onChangeDense})]})]})})}function _e(e){var t=e.row,n=e.selected,r=(e.onSelectRow,e.onViewRow,e.onEditRow,e.onDeleteRow,t.type),i=(t.appointmentDate,t.total),l=t.charges,s=t.amount,o=t.status;(0,H.k)(),(0,re.S)();return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(ve.Z,{hover:!0,selected:n,children:[(0,D.jsx)(be.Z,{sx:{display:"flex",alignItems:"center"},children:(0,D.jsx)(Ze.Z,{disableTypography:!0,primary:(0,D.jsx)(v.Z,{variant:"body2",noWrap:!0,sx:{textTransform:"capitalize"},children:r})})}),(0,D.jsx)(be.Z,{children:(0,D.jsx)(Ze.Z,{appointmentDate:!0,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,D.jsx)(be.Z,{children:(0,U.e_)(i)}),(0,D.jsx)(be.Z,{children:(0,U.e_)(l)}),(0,D.jsx)(be.Z,{children:(0,U.e_)(s)}),(0,D.jsx)(be.Z,{children:(0,D.jsx)($.Z,{variant:"soft",color:("approved"===o?"success":"pending"===o&&"warning")||"cancelled"===o&&"error"||"default",children:o})})]})})}var Fe=[{id:"service",label:"Service Type"},{id:"createDate",label:"Request Date"},{id:"gross",label:"Gross Earning (GH\u20b5)"},{id:"charge",label:"Charge (GH\u20b5)"},{id:"net",label:"Net Earning (GH\u20b5)"},{id:"status",label:"Status"}],We={name:"",service:[],status:"all",startDate:null,endDate:null};function Ae(){var e=(0,G.Z)(),t=(0,x.K$)(),n=(0,B.tv)(),a=(0,Q.x6)({defaultOrderBy:"createDate"}),u=(0,H.k)(),h=(0,p.E)(m.Vo).user,g=(0,o.useState)([]),f=(0,s.Z)(g,2),j=f[0],v=f[1],b=(0,o.useState)({}),Z=(0,s.Z)(b,2),y=(Z[0],Z[1],(0,o.useState)(We)),C=(0,s.Z)(y,2),P=C[0],R=C[1],U=(P.startDate,P.endDate,function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("/transactions/appointments/history/".concat(null===h||void 0===h?void 0:h.facilityID));case 2:t=e.sent,n=t.data,v(null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,o.useEffect)((function(){U()}),[null===h||void 0===h?void 0:h.providerID]);var J=j.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{total:Number(e.total),charges:Number(e.charges),amount:Number(e.amount)})}));console.log(J);var Y=k()(J,"total"),ee=k()(J,"charges"),te=k()(J,"amount");console.log(Y,ee,te);var ne=!(!P.startDate||!P.endDate)&&P.startDate.getTime()>P.endDate.getTime(),re=function(e){var t=e.inputData,n=e.comparator,r=e.filters,i=e.dateError,l=r.name,s=r.status,o=r.service,a=r.startDate,c=r.endDate,d=t.map((function(e,t){return[e,t]}));d.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t=d.map((function(e){return e[0]})),l&&(t=t.filter((function(e){return-1!==e.invoiceNumber.toLowerCase().indexOf(l.toLowerCase())||-1!==e.invoiceTo.name.toLowerCase().indexOf(l.toLowerCase())})));"all"!==s&&(t=t.filter((function(e){return e.status===s})));o.length&&(t=t.filter((function(e){return e.items.some((function(e){return o.includes(e.service)}))})));i||a&&c&&(t=t.filter((function(e){return(0,L.IO)(e.appointmentDate)>=(0,L.IO)(a)&&(0,L.IO)(e.appointmentDate)<=(0,L.IO)(c)})));return t}({inputData:j,comparator:(0,Q.sQ)(a.order,a.orderBy),filters:P,dateError:ne}),ie=re.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),le=a.dense?56:76,se=!!P.name||!!P.service.length||"all"!==P.status||!!P.startDate&&!!P.endDate,ae=!re.length&&se||!re.length,ce=function(e){return j.filter((function(t){return t.status===e})).length},de=[{value:"all",label:"All",color:"default",count:j.length},{value:"paid",label:"Paid",color:"success",count:ce("paid")},{value:"pending",label:"Pending",color:"warning",count:ce("pending")},{value:"overdue",label:"Overdue",color:"error",count:ce("overdue")},{value:"draft",label:"Draft",color:"default",count:ce("draft")}],ue=(0,o.useCallback)((function(e,t){a.onResetPage(),R((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,S.Z)({},e,t))}))}),[a]),xe=(0,o.useCallback)((function(e){var t=j.filter((function(t){return t.id!==e}));v(t),a.onUpdatePageDeleteRow(ie.length)}),[ie.length,a,j]),he=((0,o.useCallback)((function(){var e=j.filter((function(e){return!a.selected.includes(e.id)}));v(e),a.onUpdatePageDeleteRows({totalRows:j.length,totalRowsInPage:ie.length,totalRowsFiltered:re.length})}),[re.length,ie.length,a,j]),(0,o.useCallback)((function(e){n.push(d.H.dashboard.invoice.edit(e))}),[n])),me=(0,o.useCallback)((function(e){n.push(d.H.dashboard.invoice.details(e))}),[n]),ge=(0,o.useCallback)((function(e,t){ue("status",t)}),[ue]),fe=(0,o.useCallback)((function(){R(We)}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(c.Z,{maxWidth:!t.themeStretch&&"lg",children:[(0,D.jsx)(F.Z,{sx:{mb:{xs:3,md:5}},children:(0,D.jsx)(M.Z,{children:(0,D.jsxs)(A.Z,{direction:"row",divider:(0,D.jsx)(E.Z,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[(0,D.jsx)(X,{title:"Gross Earnings",total:j.length,percent:100,price:Y,icon:Ce,color:e.palette.primary.main}),(0,D.jsx)(X,{title:"Total Deduction",percent:20,price:ee,icon:De,color:e.palette.info.main}),(0,D.jsx)(X,{title:"Net Earnings",percent:80,price:te,icon:we,color:e.palette.success.main})]})})}),(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(_.Z,{value:P.status,onChange:ge,sx:{px:2.5,boxShadow:"inset 0 -2px 0 0 ".concat((0,I.Fq)(e.palette.grey[500],.08))},children:de.map((function(e){return(0,D.jsx)(T.Z,{value:e.value,label:e.label,iconPosition:"end",icon:(0,D.jsx)($.Z,{variant:"all"===e.value||e.value===P.status?"filled":"soft",color:e.color,children:e.count})},e.value)}))}),(0,D.jsx)(oe,{filters:P,onFilters:ue,dateError:ne,serviceOptions:V.PI.map((function(e){return e.name}))}),se&&(0,D.jsx)(pe,{filters:P,onFilters:ue,onResetFilters:fe,results:re.length,sx:{p:2.5,pt:0}}),(0,D.jsxs)(q.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,D.jsx)(Q.Z4,{dense:a.dense,numSelected:a.selected.length,rowCount:j.length,onSelectAllRows:function(e){return a.onSelectAllRows(e,j.map((function(e){return e.id})))},action:(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(N.Z,{title:"Sent",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"iconamoon:send-fill"})})}),(0,D.jsx)(N.Z,{title:"Download",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"eva:download-outline"})})}),(0,D.jsx)(N.Z,{title:"Print",children:(0,D.jsx)(z.Z,{color:"primary",children:(0,D.jsx)(K.Z,{icon:"solar:printer-minimalistic-bold"})})}),(0,D.jsx)(N.Z,{title:"Delete",children:(0,D.jsx)(z.Z,{color:"primary",onClick:u.onTrue,children:(0,D.jsx)(K.Z,{icon:"solar:trash-bin-trash-bold"})})})]})}),(0,D.jsx)(M.Z,{children:(0,D.jsxs)(W.Z,{size:a.dense?"small":"medium",sx:{minWidth:800},children:[(0,D.jsx)(Q.K,{order:a.order,orderBy:a.orderBy,headLabel:Fe,rowCount:j.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:function(e){return a.onSelectAllRows(e,j.map((function(e){return e.id})))}}),(0,D.jsxs)(O.Z,{children:[re.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map((function(e){return(0,D.jsx)(_e,{row:e,selected:a.selected.includes(e.id),onSelectRow:function(){return a.onSelectRow(e.id)},onViewRow:function(){return me(e.id)},onEditRow:function(){return he(e.id)},onDeleteRow:function(){return xe(e.id)}},e.id)})),(0,D.jsx)(Q.$W,{height:le,emptyRows:(0,Q.fQ)(a.page,a.rowsPerPage,j.length)}),(0,D.jsx)(Q.et,{notFound:ae})]})]})})]}),(0,D.jsx)(Q.S_,{count:re.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,dense:a.dense,onChangeDense:a.onChangeDense})]})]})})}var Ee=[{value:"pending",label:"Pending Transaction",icon:(0,D.jsx)(K.Z,{icon:"mdi:receipt-text-pending",width:24})},{value:"request",label:"Payout Request",icon:(0,D.jsx)(K.Z,{icon:"material-symbols:request-page-rounded",width:24})},{value:"history",label:"Payout History",icon:(0,D.jsx)(K.Z,{icon:"uis:history-alt",width:24})}];function Ne(){var e=(0,x.K$)(),t=(0,o.useState)([]),n=(0,s.Z)(t,2),g=n[0],f=n[1],j=(0,o.useState)({}),v=(0,s.Z)(j,2),b=v[0],Z=v[1],y=(0,o.useState)("pending"),C=(0,s.Z)(y,2),S=C[0],R=C[1],k=(0,o.useCallback)((function(e,t){R(t)}),[]),G=(0,o.useState)(!1),I=(0,s.Z)(G,2),F=I[0],W=I[1],A=(0,p.E)(m.Vo).user.facilityID,E=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var t,n,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Z.get("/transactions/labs/pending/".concat(A));case 2:t=e.sent,n=t.data,console.log(n),l=n.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{price:Number(e.price)})})),Z(n),f(l);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){E()}),[A]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(c.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,D.jsx)(h.Z,{heading:"Transactions",links:[{name:"Dashboard",href:d.H.dashboard.root},{name:"Transactions"}],action:(0,D.jsx)(a.Z,{component:u.r,onClick:function(){return W(!0)},variant:"contained",children:"Request Payout"}),sx:{mb:{xs:3,md:5}}}),(0,D.jsx)(_.Z,{value:S,onChange:k,sx:{mb:{xs:3,md:5}},children:Ee.map((function(e){return(0,D.jsx)(T.Z,{label:e.label,icon:e.icon,value:e.value},e.value)}))}),"pending"===S&&(0,D.jsx)(Re,{data:g,extraData:b}),"history"===S&&(0,D.jsx)(Ae,{}),"request"===S&&(0,D.jsx)(Te,{})]}),(0,D.jsx)(P,{openDialog:F,setOpenDialog:W,data:b})]})}var Oe=n(8007),ze=n(61134),qe=n(44695),Be=n(39231),He=n(87151),Le=n.n(He),Ve=n(55891);function $e(){var e=(0,ze.Gc)(),t=e.control,n=e.setValue,r=e.watch,l=e.resetField,s=(0,ze.Dq)({control:t,name:"items"}),c=s.fields,d=s.append,u=s.remove,x=r(),h=x.items.map((function(e){return e.quantity*e.price})),p=Le()(h),m=p-x.discount-x.shipping+x.taxes;(0,o.useEffect)((function(){n("totalAmount",m)}),[n,m]);var g=(0,o.useCallback)((function(e){l("items[".concat(e,"].quantity")),l("items[".concat(e,"].price")),l("items[".concat(e,"].total"))}),[l]),f=(0,o.useCallback)((function(e,t){var r;n("items[".concat(e,"].price"),null===(r=V.PI.find((function(e){return e.name===t})))||void 0===r?void 0:r.price),n("items[".concat(e,"].total"),x.items.map((function(e){return e.quantity*e.price}))[e])}),[n,x.items]),b=(0,o.useCallback)((function(e,t){n("items[".concat(t,"].quantity"),Number(e.target.value)),n("items[".concat(t,"].total"),x.items.map((function(e){return e.quantity*e.price}))[t])}),[n,x.items]),Z=(0,o.useCallback)((function(e,t){n("items[".concat(t,"].price"),Number(e.target.value)),n("items[".concat(t,"].total"),x.items.map((function(e){return e.quantity*e.price}))[t])}),[n,x.items]),y=(0,D.jsxs)(A.Z,{spacing:2,alignItems:"flex-end",sx:{mt:3,textAlign:"right",typography:"body2"},children:[(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(j.Z,{sx:{color:"text.secondary"},children:"Subtotal"}),(0,D.jsx)(j.Z,{sx:{width:160,typography:"subtitle2"},children:(0,U.e_)(p)||"-"})]}),(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(j.Z,{sx:{color:"text.secondary"},children:"Shipping"}),(0,D.jsx)(j.Z,{sx:(0,i.Z)({width:160},x.shipping&&{color:"error.main"}),children:x.shipping?"- ".concat((0,U.e_)(x.shipping)):"-"})]}),(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(j.Z,{sx:{color:"text.secondary"},children:"Discount"}),(0,D.jsx)(j.Z,{sx:(0,i.Z)({width:160},x.discount&&{color:"error.main"}),children:x.discount?"- ".concat((0,U.e_)(x.discount)):"-"})]}),(0,D.jsxs)(A.Z,{direction:"row",children:[(0,D.jsx)(j.Z,{sx:{color:"text.secondary"},children:"Taxes"}),(0,D.jsx)(j.Z,{sx:{width:160},children:x.taxes?(0,U.e_)(x.taxes):"-"})]}),(0,D.jsxs)(A.Z,{direction:"row",sx:{typography:"subtitle1"},children:[(0,D.jsx)(j.Z,{children:"Total"}),(0,D.jsx)(j.Z,{sx:{width:160},children:(0,U.e_)(m)||"-"})]})]});return(0,D.jsxs)(j.Z,{sx:{p:3},children:[(0,D.jsx)(v.Z,{variant:"h6",sx:{color:"text.disabled",mb:3},children:"Details:"}),(0,D.jsx)(A.Z,{divider:(0,D.jsx)(E.Z,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:3,children:c.map((function(e,t){return(0,D.jsxs)(A.Z,{alignItems:"flex-end",spacing:1.5,children:[(0,D.jsxs)(A.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{width:1},children:[(0,D.jsx)(Be.au,{size:"small",name:"items[".concat(t,"].title"),label:"Title",InputLabelProps:{shrink:!0}}),(0,D.jsx)(Be.au,{size:"small",name:"items[".concat(t,"].description"),label:"Description",InputLabelProps:{shrink:!0}}),(0,D.jsxs)(Be.Cc,{name:"items[".concat(t,"].service"),size:"small",label:"Service",InputLabelProps:{shrink:!0},sx:{maxWidth:{md:160}},children:[(0,D.jsx)(ee.Z,{value:"",onClick:function(){return g(t)},sx:{fontStyle:"italic",color:"text.secondary"},children:"None"}),(0,D.jsx)(E.Z,{sx:{borderStyle:"dashed"}}),V.PI.map((function(e){return(0,D.jsx)(ee.Z,{value:e.name,onClick:function(){return f(t,e.name)},children:e.name},e.id)}))]}),(0,D.jsx)(Be.au,{size:"small",type:"number",name:"items[".concat(t,"].quantity"),label:"Quantity",placeholder:"0",onChange:function(e){return b(e,t)},InputLabelProps:{shrink:!0},sx:{maxWidth:{md:96}}}),(0,D.jsx)(Be.au,{size:"small",type:"number",name:"items[".concat(t,"].price"),label:"Price",placeholder:"0.00",onChange:function(e){return Z(e,t)},InputProps:{startAdornment:(0,D.jsx)(ne.Z,{position:"start",children:(0,D.jsx)(j.Z,{sx:{typography:"subtitle2",color:"text.disabled"},children:"$"})})},sx:{maxWidth:{md:96}}}),(0,D.jsx)(Be.au,{disabled:!0,size:"small",type:"number",name:"items[".concat(t,"].total"),label:"Total",placeholder:"0.00",value:0===x.items[t].total?"":x.items[t].total.toFixed(2),onChange:function(e){return Z(e,t)},InputProps:{startAdornment:(0,D.jsx)(ne.Z,{position:"start",children:(0,D.jsx)(j.Z,{sx:{typography:"subtitle2",color:"text.disabled"},children:"$"})})},sx:(0,S.Z)({maxWidth:{md:104}},"& .".concat(Ve.Z.input),{textAlign:{md:"right"}})})]}),(0,D.jsx)(a.Z,{size:"small",color:"error",startIcon:(0,D.jsx)(K.Z,{icon:"solar:trash-bin-trash-bold"}),onClick:function(){return function(e){u(e)}(t)},children:"Remove"})]},e.id)}))}),(0,D.jsx)(E.Z,{sx:{my:3,borderStyle:"dashed"}}),(0,D.jsxs)(A.Z,{spacing:3,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},children:[(0,D.jsx)(a.Z,{size:"small",color:"primary",startIcon:(0,D.jsx)(K.Z,{icon:"mingcute:add-line"}),onClick:function(){d({title:"",description:"",service:"",quantity:1,price:0,total:0})},sx:{flexShrink:0},children:"Add Item"}),(0,D.jsxs)(A.Z,{spacing:2,justifyContent:"flex-end",direction:{xs:"column",md:"row"},sx:{width:1},children:[(0,D.jsx)(Be.au,{size:"small",label:"Shipping($)",name:"shipping",type:"number",sx:{maxWidth:{md:120}}}),(0,D.jsx)(Be.au,{size:"small",label:"Discount($)",name:"discount",type:"number",sx:{maxWidth:{md:120}}}),(0,D.jsx)(Be.au,{size:"small",label:"Taxes(%)",name:"taxes",type:"number",sx:{maxWidth:{md:120}}})]})]}),y]})}var Ke=n(38887),Me=n(21435);function Qe(){var e,t=(0,ze.Gc)(),n=t.watch,r=t.setValue,i=t.formState.errors,l=(0,Ke.F)("up","md"),s=n(),o=s.invoiceFrom,c=s.invoiceTo,d=(0,H.k)(),u=(0,H.k)();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(A.Z,{spacing:{xs:3,md:5},direction:{xs:"column",md:"row"},divider:(0,D.jsx)(E.Z,{flexItem:!0,orientation:l?"vertical":"horizontal",sx:{borderStyle:"dashed"}}),sx:{p:3},children:[(0,D.jsxs)(A.Z,{sx:{width:1},children:[(0,D.jsxs)(A.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,D.jsx)(v.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"From:"}),(0,D.jsx)(z.Z,{onClick:d.onTrue,children:(0,D.jsx)(K.Z,{icon:"solar:pen-bold"})})]}),(0,D.jsxs)(A.Z,{spacing:1,children:[(0,D.jsx)(v.Z,{variant:"subtitle2",children:o.name}),(0,D.jsx)(v.Z,{variant:"body2",children:o.fullAddress}),(0,D.jsxs)(v.Z,{variant:"body2",children:[" ",o.phoneNumber]})]})]}),(0,D.jsxs)(A.Z,{sx:{width:1},children:[(0,D.jsxs)(A.Z,{direction:"row",alignItems:"center",sx:{mb:1},children:[(0,D.jsx)(v.Z,{variant:"h6",sx:{color:"text.disabled",flexGrow:1},children:"To:"}),(0,D.jsx)(z.Z,{onClick:u.onTrue,children:(0,D.jsx)(K.Z,{icon:c?"solar:pen-bold":"mingcute:add-line"})})]}),c?(0,D.jsxs)(A.Z,{spacing:1,children:[(0,D.jsx)(v.Z,{variant:"subtitle2",children:c.name}),(0,D.jsx)(v.Z,{variant:"body2",children:c.fullAddress}),(0,D.jsxs)(v.Z,{variant:"body2",children:[" ",c.phoneNumber]})]}):(0,D.jsx)(v.Z,{typography:"caption",sx:{color:"error.main"},children:null===(e=i.invoiceTo)||void 0===e?void 0:e.message})]})]}),(0,D.jsx)(Me.IJ,{title:"Customers",open:d.value,onClose:d.onFalse,selected:function(e){return(null===o||void 0===o?void 0:o.id)===e},onSelect:function(e){return r("invoiceFrom",e)},list:V.PX,action:(0,D.jsx)(a.Z,{size:"small",startIcon:(0,D.jsx)(K.Z,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})}),(0,D.jsx)(Me.IJ,{title:"Customers",open:u.value,onClose:u.onFalse,selected:function(e){return(null===c||void 0===c?void 0:c.id)===e},onSelect:function(e){return r("invoiceTo",e)},list:V.PX,action:(0,D.jsx)(a.Z,{size:"small",startIcon:(0,D.jsx)(K.Z,{icon:"mingcute:add-line"}),sx:{alignSelf:"flex-end"},children:"New"})})]})}function Ue(){var e=(0,ze.Gc)(),t=e.control,n=(0,e.watch)();return(0,D.jsxs)(A.Z,{spacing:2,direction:{xs:"column",sm:"row"},sx:{p:3,bgcolor:"background.neutral"},children:[(0,D.jsx)(Be.au,{disabled:!0,name:"invoiceNumber",label:"Invoice number",value:n.invoiceNumber}),(0,D.jsx)(Be.Cc,{fullWidth:!0,name:"status",label:"Status",InputLabelProps:{shrink:!0},PaperPropsSx:{textTransform:"capitalize"},children:["paid","pending","overdue","draft"].map((function(e){return(0,D.jsx)(ee.Z,{value:e,children:e},e)}))}),(0,D.jsx)(ze.Qr,{name:"createDate",control:t,render:function(e){var t=e.field,n=e.fieldState.error;return(0,D.jsx)(Y.M,{label:"Date create",value:t.value,onChange:function(e){t.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}}),(0,D.jsx)(ze.Qr,{name:"dueDate",control:t,render:function(e){var t=e.field,n=e.fieldState.error;return(0,D.jsx)(Y.M,{label:"Due date",value:t.value,onChange:function(e){t.onChange(e)},slotProps:{textField:{fullWidth:!0,error:!!n,helperText:null===n||void 0===n?void 0:n.message}}})}})]})}function Je(e){var t=e.currentInvoice,n=(0,B.tv)(),i=(0,H.k)(),s=(0,H.k)(),a=Oe.Ry().shape({invoiceTo:Oe.nK().nullable().required("Invoice to is required"),createDate:Oe.nK().nullable().required("Create date is required"),dueDate:Oe.nK().required("Due date is required").test("date-min","Due date must be later than create date",(function(e,t){var n=t.parent;return e.getTime()>n.createDate.getTime()})),taxes:Oe.Rx(),status:Oe.Z_(),discount:Oe.Rx(),shipping:Oe.Rx(),invoiceFrom:Oe.nK(),totalAmount:Oe.Rx(),invoiceNumber:Oe.Z_()}),c=(0,o.useMemo)((function(){return{invoiceNumber:(null===t||void 0===t?void 0:t.invoiceNumber)||"INV-1990",createDate:(null===t||void 0===t?void 0:t.createDate)||new Date,dueDate:(null===t||void 0===t?void 0:t.dueDate)||null,taxes:(null===t||void 0===t?void 0:t.taxes)||0,shipping:(null===t||void 0===t?void 0:t.shipping)||0,status:(null===t||void 0===t?void 0:t.status)||"draft",discount:(null===t||void 0===t?void 0:t.discount)||0,invoiceFrom:(null===t||void 0===t?void 0:t.invoiceFrom)||V.PX[0],invoiceTo:(null===t||void 0===t?void 0:t.invoiceTo)||null,items:(null===t||void 0===t?void 0:t.items)||[{title:"",description:"",service:"",quantity:1,price:0,total:0}],totalAmount:(null===t||void 0===t?void 0:t.totalAmount)||0}}),[t]),u=(0,ze.cI)({resolver:(0,qe.X)(a),defaultValues:c}),x=u.reset,h=u.handleSubmit,p=u.formState.isSubmitting,m=h(function(){var e=(0,l.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.onTrue(),e.prev=1,e.next=4,new Promise((function(e){return setTimeout(e,500)}));case 4:x(),i.onFalse(),n.push(d.H.dashboard.invoice.root),console.info("DATA",JSON.stringify(t,null,2)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),i.onFalse();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),g=h(function(){var e=(0,l.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.onTrue(),e.prev=1,e.next=4,new Promise((function(e){return setTimeout(e,500)}));case 4:x(),s.onFalse(),n.push(d.H.dashboard.invoice.root),console.info("DATA",JSON.stringify(t,null,2)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),s.onFalse();case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}());return(0,D.jsxs)(Be.ZP,{methods:u,children:[(0,D.jsxs)(F.Z,{children:[(0,D.jsx)(Qe,{}),(0,D.jsx)(Ue,{}),(0,D.jsx)($e,{})]}),(0,D.jsxs)(A.Z,{justifyContent:"flex-end",direction:"row",spacing:2,sx:{mt:3},children:[(0,D.jsx)(y.Z,{color:"inherit",size:"large",variant:"outlined",loading:i.value&&p,onClick:m,children:"Save as Draft"}),(0,D.jsxs)(y.Z,{size:"large",variant:"contained",loading:s.value&&p,onClick:g,children:[t?"Update":"Create"," & Send"]})]})]})}function Xe(e){var t=e.id,n=(0,x.K$)(),r=V.Ot.find((function(e){return e.id===t}));return(0,D.jsxs)(c.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,D.jsx)(h.Z,{heading:"Edit",links:[{name:"Dashboard",href:d.H.dashboard.root},{name:"Invoice",href:d.H.dashboard.invoice.root},{name:null===r||void 0===r?void 0:r.invoiceNumber}],sx:{mb:{xs:3,md:5}}}),(0,D.jsx)(Je,{currentInvoice:r})]})}function Ye(){var e=(0,x.K$)();return(0,D.jsxs)(c.Z,{maxWidth:!e.themeStretch&&"lg",children:[(0,D.jsx)(h.Z,{heading:"Create a new invoice",links:[{name:"Dashboard",href:d.H.dashboard.root},{name:"Invoice",href:d.H.dashboard.invoice.root},{name:"New Invoice"}],sx:{mb:{xs:3,md:5}}}),(0,D.jsx)(Je,{})]})}(0,n(66934).ZP)(ve.Z)((function(e){var t=e.theme;return{"& td":{textAlign:"right",borderBottom:"none",paddingTop:t.spacing(1),paddingBottom:t.spacing(1)}}}))}}]);
//# sourceMappingURL=2970.36ca6a7b.chunk.js.map