"use strict";(self.webpackChunk_abibiman_telehealth=self.webpackChunk_abibiman_telehealth||[]).push([[7289],{97289:function(e,r,n){n.d(r,{ZL:function(){return He},HR:function(){return Fe},Cd:function(){return Ze}});var t=n(4942),o=n(1413),s=n(74165),i=n(15861),a=n(29439),l=n(93433),d=n(72791),c=n(57621),x=n(79836),p=n(5849),h=n(20068),u=n(89164),m=n(53382),Z=n(13400),j=n(39281),g=n(38072),y=n(19208),f=n(57062),b=n(9145),v=n(22459),w=n(80160),C=n(40268),S=n(47974),D=n(3352),P=n(60720),k=n(50933),R=n(1382),O=n(64554),A=n(94721),I=n(82626),T=n(9195),F=n(68745),B=n(49900),N=n(52115),W=n(27938),U=n(36314),L=n(4567),M=n(5574),_=n(65661),E=n(97123),H=n(39157),Q=n(2102),z=n(16386),G=n(56890),q=n(80184);function V(e){var r=e.row,n=e.openDialogBox,t=e.setOpenDialogBox,o=e.setOpenAppointmentBox,s=r.dateOrdered,i=r.labOrderId,a=(r.appointmentDate,r.providerContact,r.patientContact,r.providerName,r.labItems),l=(new Date(s).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}),a.reduce((function(e,r){return e+r.cost}),0));return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(M.Z,{open:n,onClose:function(){return t(!1)},sx:{"& .MuiDialog-paper":{width:"50%",maxWidth:"none",maxHeight:"90vh"}},children:[(0,q.jsx)(_.Z,{align:"center",children:(0,q.jsx)(B.Z,{primary:i,secondary:"General Laboratory Request Form",primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,q.jsx)(H.Z,{children:(0,q.jsxs)(U.Z,{spacing:2,component:W.Z,variant:"outlined",sx:{p:2.5,minWidth:300,flexShrink:0,borderRadius:5,typography:"body1",borderStyle:"dashed"},children:[(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Name"}),r.patientName]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Phone Number"}),null===r||void 0===r?void 0:r.patientContact.phoneNumber]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Email"}),null===r||void 0===r?void 0:r.patientContact.email]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Name"}),r.providerName]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Phone Number"}),null===r||void 0===r?void 0:r.providerContact.phoneNumber]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Email"}),null===r||void 0===r?void 0:r.providerContact.email]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Appointment Date"}),(0,z.Z)(new Date(s),"dd/MM/yyyy")]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Priority"}),r.priority]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Message"}),r.description]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Category and Test Type"}),(0,q.jsx)(j.Z,{sx:{border:"0.5px solid #bdbdbd",borderRadius:"10px"},children:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(G.Z,{children:(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{children:"Category"})," ",(0,q.jsx)(F.Z,{children:"Test"}),(0,q.jsx)(F.Z,{children:"Price (GH\u20b5)"})]})}),(0,q.jsxs)(m.Z,{children:[a.map((function(e,r){return(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{sx:{borderBottomStyle:"solid"},children:(0,q.jsx)(L.Z,{children:e.category})}),(0,q.jsx)(F.Z,{sx:{borderBottomStyle:"solid"},children:(0,q.jsx)(L.Z,{sx:{color:"primary.main"},children:e.test})}),(0,q.jsx)(F.Z,{sx:{borderBottomStyle:"solid"},children:(0,q.jsx)(L.Z,{sx:{color:"primary.main"},children:e.cost})})]},r)})),(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{colSpan:2,children:(0,q.jsx)(L.Z,{variant:"h6",children:"Total Cost:"})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(L.Z,{variant:"h6",children:l})})]})]})]})})]})]})}),(0,q.jsxs)(E.Z,{children:[(0,q.jsx)(p.Z,{onClick:function(){return o(!0)},variant:"outlined",color:"inherit",children:"pending"===r.status?"Schedule":"Reschedule"}),(0,q.jsx)(p.Z,{onClick:function(){return t(!1)},variant:"outlined",color:"inherit",children:"Cancel"})]})]})})}var K=n(48550),$=n(12258);function Y(e){var r=e.row,n=e.onDeleteRow,t=e.fetchAllOrders,c=e.setOpenAppointmentBox,x=e.openAppointmentBox,h=r.id,u=r.labOrderId,m=r.labItems,Z=(0,v.k)(),j=(0,d.useState)(""),g=(0,a.Z)(j,2),y=g[0],f=g[1],b=(0,d.useState)(""),w=(0,a.Z)(b,2),C=w[0],S=w[1],P=(0,d.useState)(""),k=(0,a.Z)(P,2),R=(k[0],k[1],(0,d.useState)(m.map((function(e){return{listID:e._id,cost:e.cost||0}})))),O=(0,a.Z)(R,2),A=O[0],I=O[1],T=(0,d.useState)(!1),F=(0,a.Z)(T,2),B=F[0],N=F[1],W=function(){return c(!1)},U=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),r={appointmentDate:y,appointmentTime:y,labItems:A,labOrderId:u},e.prev=2,e.next=5,Q.Z.patch("/medical-labs/facility/approve/".concat(h),r);case 5:e.sent&&t(),N(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),N(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(M.Z,{open:x,onClose:W,sx:{"& .MuiDialog-paper":{width:"40%",maxWidth:"none"}},children:[(0,q.jsx)(_.Z,{align:"center",children:"Set Appointment"}),(0,q.jsxs)(H.Z,{children:[(0,q.jsx)(L.Z,{sx:{mb:3},children:"Please fill the form below"}),(0,q.jsx)(K.Z,{autoFocus:!0,fullWidth:!0,type:"date",margin:"dense",variant:"outlined",value:y,onChange:function(e){return f(e.target.value)}}),(0,q.jsx)(K.Z,{autoFocus:!0,fullWidth:!0,type:"time",margin:"dense",variant:"outlined",value:C,onChange:function(e){return S(e.target.value)}}),m.map((function(e,r){return(0,q.jsx)(K.Z,{fullWidth:!0,type:"number",margin:"dense",variant:"outlined",label:"Cost for ".concat(e.category," - ").concat(e.test," (GH\u20b5)"),value:0===A[r].cost?"":A[r].cost||"",onChange:function(e){return I((function(n){var t=(0,l.Z)(n);return t[r]=(0,o.Z)((0,o.Z)({},t[r]),{},{cost:parseFloat(e.target.value)||0}),t}))}},e._id)}))]}),(0,q.jsxs)(E.Z,{children:[(0,q.jsx)(p.Z,{onClick:W,variant:"outlined",color:"inherit",children:"Cancel"}),(0,q.jsx)($.Z,{onClick:function(){return U()},variant:"contained",loading:B,children:"Book Appointment"})]})]}),(0,q.jsx)(D.Q,{open:Z.value,onClose:Z.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:n,children:"Delete"})})]})}var J=n(24233),X=n(58518);n(9546);function ee(e){var r=e.row,n=(e.onDeleteRow,e.fetchAllOrders,e.setOpenAppointmentBox,e.openAppointmentBox,e.openUploadBox),t=e.handleClose,o=e.currentTest._id,c=e.setCompletedTests,x=e.setDownloadURL,h=((0,v.k)(),(0,d.useState)("")),u=(0,a.Z)(h,2),m=(u[0],u[1],r.labOrderId),Z=(0,d.useState)([]),j=(0,a.Z)(Z,2),g=j[0],y=j[1],f=(0,d.useState)(null),b=(0,a.Z)(f,2),w=(b[0],b[1]),C=(0,d.useState)(null),S=(0,a.Z)(C,2),D=(S[0],S[1]),P=(0,d.useState)(null),k=(0,a.Z)(P,2),R=(k[0],k[1],(0,d.useState)(!1)),O=(0,a.Z)(R,2),A=O[0],I=O[1],T=(0,v.k)(),F=((0,d.useCallback)((function(e){var r=e[0];r&&w(Object.assign(r,{preview:URL.createObjectURL(r)}))}),[]),(0,d.useCallback)((function(e){var r=e[0];r&&D(Object.assign(r,{preview:URL.createObjectURL(r)}))}),[]),(0,d.useCallback)((function(e){if(e.length>0&&0===g.length){var r=e[0];y([Object.assign(r,{preview:URL.createObjectURL(r)})])}}),[g]));console.log(g);var B=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var r,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,r=new FormData,n=g[0],r.append("image",n),x((function(e){return[].concat((0,l.Z)(e),[{_id:o,singleFile:n}])})),r.append("labOrderId",m.trim()),console.log(r.get("image")),e.next=10,Q.Z.patch("/medical-labs/facility/result/upload/".concat(o),r);case 10:i=e.sent,c((function(e){return[].concat((0,l.Z)(e),[o])})),t(),y([]),console.log(i),(0,X.yv)("Upload successful!"),I(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error(e.t0),I(!1);case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();return console.log(g),(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(M.Z,{open:n,onClose:t,sx:{"& .MuiDialog-paper":{maxWidth:"500px"}},children:[(0,q.jsx)(_.Z,{align:"center",children:"Upload Results"}),(0,q.jsx)(H.Z,{children:(0,q.jsx)(J.gq,{multiple:!0,thumbnail:T.value,files:g,onDrop:F,onRemove:function(e){var r=g.filter((function(r){return r!==e}));y(r)},disabled:g.length>0})}),(0,q.jsxs)(E.Z,{children:[(0,q.jsx)(p.Z,{onClick:t,variant:"outlined",color:"inherit",children:"Discard"}),(0,q.jsx)($.Z,{onClick:B,variant:"contained",loading:A,disabled:0===g.length,children:"Upload"})]})]})})}function re(e){var r=e.row,n=e.onDeleteRow,t=e.fetchAllOrders,o=e.handleClose,l=e.openUploadList,c=(r.id,r.labOrderId),x=r.labItems,h=(0,v.k)();console.log(r);var u=(0,d.useState)(!1),m=(0,a.Z)(u,2),Z=(m[0],m[1],(0,d.useState)(!1)),j=(0,a.Z)(Z,2),g=j[0],y=j[1],f=(0,d.useState)({}),b=(0,a.Z)(f,2),w=b[0],C=b[1],S=(0,d.useState)(!1),P=(0,a.Z)(S,2),k=P[0],R=P[1],O=(0,d.useState)([]),A=(0,a.Z)(O,2),I=A[0],T=A[1],F=(0,d.useState)([]),N=(0,a.Z)(F,2),W=N[0],L=N[1],z=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,Q.Z.patch("/medical-labs/facility/result/complete/".concat(c));case 4:(r=e.sent)&&t(),R(!1),console.log(r),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),R(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(M.Z,{open:l,onClose:o,sx:{"& .MuiDialog-paper":{width:"500px",maxWidth:"none"},"@media (max-width: 500px )":{width:"100%"}},children:[(0,q.jsx)(_.Z,{align:"center",children:"Upload Lab Results"}),(0,q.jsx)(H.Z,{children:x.map((function(e){return(0,q.jsxs)(U.Z,{flexDirection:"row",sx:{margin:"25px 0"},children:[(0,q.jsx)(B.Z,{primary:e.category,secondary:e.test,primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}}),I.includes(e._id)?(0,q.jsx)(p.Z,{variant:"outlined",color:"primary",onClick:function(){return function(e){var r=W.find((function(r){return r._id===e}));r?window.open(r.singleFile.preview,"_blank"):console.error("File not found for lab item with id: ".concat(e))}(e._id)},children:"Preview"}):(0,q.jsx)(p.Z,{variant:"outlined",color:"primary",onClick:function(){y(!0),C(e)},children:"Upload Result"})]},e.id)}))}),(0,q.jsxs)(E.Z,{children:[(0,q.jsx)(p.Z,{onClick:o,variant:"outlined",color:"inherit",children:"Close"}),(0,q.jsx)($.Z,{onClick:function(){return z()},variant:"contained",loading:k,children:"Mark as Complete"})]})]}),(0,q.jsx)(D.Q,{open:h.value,onClose:h.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:n,children:"Delete"})}),(0,q.jsx)(ee,{row:r,currentTest:w,openUploadBox:g,handleClose:function(){return y(!1)},setCompletedTests:T,setDownloadURL:L})]})}function ne(e){var r=e.row,n=e.selected,t=e.onViewRow,o=(e.onSelectRow,e.onDeleteRow),s=(e.fetchAllOrders,r.orderType,r.priority),i=r.status,c=r.patientName,x=(r.id,r.labItems),h=r.dateOrdered,u=(r.appointmentDate,r.labOrderId),m=(0,v.k)(),j=(0,N.S)(),g=(0,d.useState)(!1),y=(0,a.Z)(g,2),f=y[0],b=y[1],S=(0,d.useState)(!1),P=(0,a.Z)(S,2),k=(P[0],P[1],(0,d.useState)(!1)),R=(0,a.Z)(k,2),W=(R[0],R[1]),U=(0,d.useState)(!1),L=(0,a.Z)(U,2),M=L[0],_=L[1],E=(0,d.useState)(!1),H=(0,a.Z)(E,2),Q=H[0],G=H[1],K=(0,d.useState)(!1),$=(0,a.Z)(K,2),J=($[0],$[1],(0,q.jsxs)(T.Z,{hover:!0,selected:n,children:[(0,q.jsx)(F.Z,{children:(0,q.jsx)(O.Z,{onClick:t,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"".concat(u)})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(B.Z,{primary:c,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(B.Z,{primary:(0,z.Z)(new Date(h),"dd/MM/yyyy"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,q.jsxs)(F.Z,{align:"center",children:[(0,l.Z)(new Set(x.map((function(e){return e.category})))).join(", ")," "]}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(w.Z,{variant:"soft",color:("approved"===i?"success":"pending"===i&&"warning")||"default",children:i})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(w.Z,{variant:"soft",color:("regular"===s?"success":"urgent"===s&&"warning")||"emergency"===s&&"error"||"default",children:s})}),(0,q.jsx)(F.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,q.jsx)(Z.Z,{color:j.open?"inherit":"default",onClick:j.onOpen,children:(0,q.jsx)(C.Z,{icon:"eva:more-vertical-fill"})})})]}));return(0,q.jsxs)(q.Fragment,{children:[J,(0,q.jsxs)(N.Z,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{maxWidth:200},children:[(0,q.jsxs)(I.Z,{onClick:function(){b(!0),j.onClose()},children:[(0,q.jsx)(C.Z,{icon:"solar:eye-bold"}),"View"]}),(0,q.jsxs)(I.Z,{onClick:function(){_(!0),j.onClose()},children:[(0,q.jsx)(C.Z,{icon:"material-symbols-light:upload-sharp"}),"Upload Results"]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed"}}),(0,q.jsxs)(I.Z,{onClick:function(){alert("Cancel Order")},children:[(0,q.jsx)(C.Z,{icon:"flat-color-icons:cancel"}),"Cancel"]})]}),(0,q.jsx)(V,{row:r,openDialogBox:f,setOpenDialogBox:b,setOpenAppointmentBox:G}),(0,q.jsx)(Y,{openAppointmentBox:Q,setOpenAppointmentBox:G,row:r}),(0,q.jsx)(re,{openUploadList:M,handleClose:function(){return _(!1)},setOpenUploadBox:W,row:r}),(0,q.jsx)(D.Q,{open:m.value,onClose:m.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:o,children:"Delete"})})]})}var te=n(53106),oe=n(63466);function se(e){var r=e.filters,n=e.onFilters,t=e.canReset,o=e.onResetFilters,s=(0,N.S)(),i=(0,d.useCallback)((function(e){n("orderType",e.target.value)}),[n]),a=(0,d.useCallback)((function(e){n("startDate",e)}),[n]),l=(0,d.useCallback)((function(e){n("endDate",e)}),[n]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(U.Z,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[(0,q.jsx)(te.M,{label:"Start date",value:r.startDate,onChange:a,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),(0,q.jsx)(te.M,{label:"End date",value:r.endDate,onChange:l,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[(0,q.jsx)(K.Z,{fullWidth:!0,value:r.orderType,onChange:i,placeholder:"Search by order type...",InputProps:{startAdornment:(0,q.jsx)(oe.Z,{position:"start",children:(0,q.jsx)(C.Z,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),(0,q.jsx)(Z.Z,{onClick:s.onOpen,children:(0,q.jsx)(C.Z,{icon:"eva:more-vertical-fill"})})]}),t&&(0,q.jsx)(p.Z,{color:"error",sx:{flexShrink:0},onClick:o,startIcon:(0,q.jsx)(C.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),(0,q.jsxs)(N.Z,{open:s.open,onClose:s.onClose,arrow:"right-top",sx:{width:140},children:[(0,q.jsxs)(I.Z,{onClick:function(){s.onClose()},children:[(0,q.jsx)(C.Z,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),(0,q.jsxs)(I.Z,{onClick:function(){s.onClose()},children:[(0,q.jsx)(C.Z,{icon:"solar:export-bold"}),"Export"]})]})]})}var ie=n(45987),ae=n(85771),le=n(25265),de=["filters","onFilters","onResetFilters","results"],ce=["label","children","sx"];function xe(e){var r=e.filters,n=e.onFilters,t=e.onResetFilters,s=e.results,i=(0,ie.Z)(e,de),a=(0,le.l2)(r.startDate,r.endDate);return(0,q.jsxs)(U.Z,(0,o.Z)((0,o.Z)({spacing:1.5},i),{},{children:[(0,q.jsxs)(O.Z,{sx:{typography:"body2"},children:[(0,q.jsx)("strong",{children:s}),(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),(0,q.jsxs)(U.Z,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:["all"!==r.status&&(0,q.jsx)(pe,{label:"Status:",children:(0,q.jsx)(ae.Z,{size:"small",label:r.status,onDelete:function(){n("status","all")}})}),r.startDate&&r.endDate&&(0,q.jsx)(pe,{label:"Date:",children:(0,q.jsx)(ae.Z,{size:"small",label:a,onDelete:function(){n("startDate",null),n("endDate",null)}})}),(0,q.jsx)(p.Z,{color:"error",onClick:t,startIcon:(0,q.jsx)(C.Z,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]}))}function pe(e){var r=e.label,n=e.children,t=e.sx,s=(0,ie.Z)(e,ce);return(0,q.jsxs)(U.Z,(0,o.Z)((0,o.Z)({component:W.Z,variant:"outlined",spacing:1,direction:"row",sx:(0,o.Z)({p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed"},t)},s),{},{children:[(0,q.jsx)(O.Z,{component:"span",sx:{typography:"subtitle2"},children:r}),(0,q.jsx)(U.Z,{spacing:1,direction:"row",flexWrap:"wrap",children:n})]}))}var he=n(8976),ue=([{value:"all",label:"All"}].concat((0,l.Z)(f.s8)),[{id:"orderNumber",label:"Appointment ID",width:110},{id:"name",label:"Patient",width:140},{id:"createdAt",label:"Date",width:120},{id:"totalQuantity",label:"Order Type",width:200,align:"center"},{id:"totalAmount",label:"Status",width:110},{id:"status",label:"Priority",width:110},{id:"",width:88}]),me={name:"",status:"all",startDate:null,endDate:null,orderType:"",labOrderId:""};function Ze(){var e=(0,R.x6)({defaultOrderBy:"orderNumber"}),r=(0,P.K$)(),n=(0,y.tv)(),l=(0,v.k)(),f=(0,d.useState)([]),w=(0,a.Z)(f,2),O=w[0],A=w[1],I=(0,d.useState)(me),T=(0,a.Z)(I,2),F=T[0],B=T[1],N=(0,he.E)().user,W=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.Z.get("/medical-labs/facility/approved/".concat(null===N||void 0===N?void 0:N.facilityID));case 3:r=e.sent,n=r.data,A(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();console.log(O),(0,d.useEffect)((function(){W()}),[]);var U=!(!F.startDate||!F.endDate)&&F.startDate.getTime()>F.endDate.getTime(),L=function(e){var r=e.inputData,n=e.comparator,t=e.filters,o=e.dateError,s=t.status,i=(t.name,t.startDate),a=t.endDate,l=t.orderType,d=(t.labOrderId,r.map((function(e,r){return[e,r]})));d.sort((function(e,r){var t=n(e[0],r[0]);return 0!==t?t:e[1]-r[1]})),r=d.map((function(e){return e[0]})),l&&(r=r.filter((function(e){return-1!==e.orderType.toLowerCase().indexOf(l.toLowerCase())})));"all"!==s&&(r=r.filter((function(e){return e.status===s})));o||i&&a&&(r=r.filter((function(e){return(0,b.IO)(e.createdAt)>=(0,b.IO)(i)&&(0,b.IO)(e.createdAt)<=(0,b.IO)(a)})));return r}({inputData:O,comparator:(0,R.sQ)(e.order,e.orderBy),filters:F,dateError:U}),M=L.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),_=e.dense?52:72,E=!!F.name||"all"!==F.status||!!F.startDate&&!!F.endDate,H=!L.length&&E||!L.length,z=(0,d.useCallback)((function(r,n){e.onResetPage(),B((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,t.Z)({},r,n))}))}),[e]),G=(0,d.useCallback)((function(r){var n=O.filter((function(e){return e.id!==r}));A(n),e.onUpdatePageDeleteRow(M.length)}),[M.length,e,O]),V=(0,d.useCallback)((function(){var r=O.filter((function(r){return!e.selected.includes(r.id)}));A(r),e.onUpdatePageDeleteRows({totalRows:O.length,totalRowsInPage:M.length,totalRowsFiltered:L.length})}),[L.length,M.length,e,O]),K=(0,d.useCallback)((function(){B(me)}),[]),$=(0,d.useCallback)((function(e){n.push(g.H.dashboard.order.details(e))}),[n]);(0,d.useCallback)((function(e,r){z("status",r)}),[z]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(u.Z,{maxWidth:!r.themeStretch&&"lg",children:[(0,q.jsx)(k.Z,{heading:"All Appointments",links:[{name:"Dashboard",href:g.H.dashboard.root},{name:"Appointments",href:g.H.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),(0,q.jsxs)(c.Z,{children:[(0,q.jsx)(se,{filters:F,onFilters:z,canReset:E,onResetFilters:K}),E&&(0,q.jsx)(xe,{filters:F,onFilters:z,onResetFilters:K,results:L.length,sx:{p:2.5,pt:0}}),(0,q.jsxs)(j.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,q.jsx)(R.Z4,{dense:e.dense,numSelected:e.selected.length,rowCount:O.length,onSelectAllRows:function(r){return e.onSelectAllRows(r,O.map((function(e){return e.id})))},action:(0,q.jsx)(h.Z,{title:"Delete",children:(0,q.jsx)(Z.Z,{color:"primary",onClick:l.onTrue,children:(0,q.jsx)(C.Z,{icon:"solar:trash-bin-trash-bold"})})})}),(0,q.jsx)(S.Z,{children:(0,q.jsxs)(x.Z,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[(0,q.jsx)(R.K,{order:e.order,orderBy:e.orderBy,headLabel:ue,rowCount:O.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:function(r){return e.onSelectAllRows(r,O.map((function(e){return e.id})))}}),(0,q.jsxs)(m.Z,{children:[L.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((function(r){return(0,q.jsx)(ne,{row:r,selected:e.selected.includes(r.id),onSelectRow:function(){return e.onSelectRow(r.id)},onDeleteRow:function(){return G(r.id)},onViewRow:function(){return $(r.id)},fetchAllOrders:W},r.id)})),(0,q.jsx)(R.$W,{height:_,emptyRows:(0,R.fQ)(e.page,e.rowsPerPage,O.length)}),(0,q.jsx)(R.et,{notFound:H})]})]})})]}),(0,q.jsx)(R.S_,{count:L.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,q.jsx)(D.Q,{open:l.value,onClose:l.onFalse,title:"Delete",content:(0,q.jsxs)(q.Fragment,{children:["Are you sure want to delete"," ",(0,q.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:function(){V(),l.onFalse()},children:"Delete"})})]})}var je=n(24308),ge=n(50533),ye=n(60220),fe=n(9585);function be(e){var r=e.customer,n=e.delivery,t=e.payment,o=e.shippingAddress,s=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(fe.Z,{title:"Customer Info",action:(0,q.jsx)(Z.Z,{children:(0,q.jsx)(C.Z,{icon:"solar:pen-bold"})})}),(0,q.jsxs)(U.Z,{direction:"row",sx:{p:3},children:[(0,q.jsx)(ye.Z,{alt:r.name,src:r.avatarUrl,sx:{width:48,height:48,mr:2}}),(0,q.jsxs)(U.Z,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[(0,q.jsx)(L.Z,{variant:"subtitle2",children:r.name}),(0,q.jsx)(O.Z,{sx:{color:"text.secondary"},children:r.email}),(0,q.jsxs)(O.Z,{children:["IP Address:",(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",ml:.25},children:r.ipAddress})]}),(0,q.jsx)(p.Z,{size:"small",color:"error",startIcon:(0,q.jsx)(C.Z,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),i=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(fe.Z,{title:"Delivery",action:(0,q.jsx)(Z.Z,{children:(0,q.jsx)(C.Z,{icon:"solar:pen-bold"})})}),(0,q.jsxs)(U.Z,{spacing:1.5,sx:{p:3,typography:"body2"},children:[(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),n.shipBy]}),(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),n.speedy]}),(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),(0,q.jsx)(ge.Z,{underline:"always",color:"inherit",children:n.trackingNumber})]})]})]}),a=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(fe.Z,{title:"Shipping",action:(0,q.jsx)(Z.Z,{children:(0,q.jsx)(C.Z,{icon:"solar:pen-bold"})})}),(0,q.jsxs)(U.Z,{spacing:1.5,sx:{p:3,typography:"body2"},children:[(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address"}),o.fullAddress]}),(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),o.phoneNumber]})]})]}),l=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(fe.Z,{title:"Payment",action:(0,q.jsx)(Z.Z,{children:(0,q.jsx)(C.Z,{icon:"solar:pen-bold"})})}),(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[(0,q.jsx)(O.Z,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Phone number"}),t.cardNumber,(0,q.jsx)(C.Z,{icon:"logos:mastercard",width:24,sx:{ml:.5}})]})]});return(0,q.jsxs)(c.Z,{children:[s,(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed"}}),i,(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed"}}),a,(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed"}}),l]})}var ve=n(17070);function we(e){var r=e.items,n=e.shipping,t=e.discount,s=e.taxes,i=e.subTotal,a=e.totalAmount,l=(0,q.jsxs)(U.Z,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[(0,q.jsxs)(U.Z,{direction:"row",children:[(0,q.jsx)(O.Z,{sx:{color:"text.secondary"},children:"Subtotal"}),(0,q.jsx)(O.Z,{sx:{width:160,typography:"subtitle2"},children:(0,ve.e_)(i)||"-"})]}),(0,q.jsxs)(U.Z,{direction:"row",children:[(0,q.jsx)(O.Z,{sx:{color:"text.secondary"},children:"Shipping"}),(0,q.jsx)(O.Z,{sx:(0,o.Z)({width:160},n&&{color:"error.main"}),children:n?"- ".concat((0,ve.e_)(n)):"-"})]}),(0,q.jsxs)(U.Z,{direction:"row",children:[(0,q.jsx)(O.Z,{sx:{color:"text.secondary"},children:"Discount"}),(0,q.jsx)(O.Z,{sx:(0,o.Z)({width:160},t&&{color:"error.main"}),children:t?"- ".concat((0,ve.e_)(t)):"-"})]}),(0,q.jsxs)(U.Z,{direction:"row",children:[(0,q.jsx)(O.Z,{sx:{color:"text.secondary"},children:"Taxes"}),(0,q.jsx)(O.Z,{sx:{width:160},children:s?(0,ve.e_)(s):"-"})]}),(0,q.jsxs)(U.Z,{direction:"row",sx:{typography:"subtitle1"},children:[(0,q.jsx)(O.Z,{children:"Total"}),(0,q.jsx)(O.Z,{sx:{width:160},children:(0,ve.e_)(a)||"-"})]})]});return(0,q.jsxs)(c.Z,{children:[(0,q.jsx)(fe.Z,{title:"Details"}),(0,q.jsxs)(U.Z,{sx:{px:3},children:[(0,q.jsx)(S.Z,{children:r.map((function(e){return(0,q.jsxs)(U.Z,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:function(e){return"dashed 2px ".concat(e.palette.background.neutral)}},children:[(0,q.jsx)(ye.Z,{src:e.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),(0,q.jsx)(B.Z,{primary:e.name,secondary:e.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),(0,q.jsxs)(O.Z,{sx:{typography:"body2"},children:["x",e.quantity]}),(0,q.jsx)(O.Z,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:(0,ve.e_)(e.price)})]},e.id)}))}),l]})]})}var Ce=n(83854);function Se(e){var r=e.status,n=e.backLink,t=e.createdAt,o=e.orderNumber,s=e.statusOptions,i=e.onChangeStatus,a=(0,N.S)();return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(U.Z,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[(0,q.jsxs)(U.Z,{spacing:1,direction:"row",alignItems:"flex-start",children:[(0,q.jsx)(Z.Z,{component:Ce.r,href:n,children:(0,q.jsx)(C.Z,{icon:"eva:arrow-ios-back-fill"})}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsxs)(U.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,q.jsxs)(L.Z,{variant:"h4",children:[" Order ",o," "]}),(0,q.jsx)(w.Z,{variant:"soft",color:("completed"===r?"success":"pending"===r&&"warning")||"cancelled"===r&&"error"||"default",children:r})]}),(0,q.jsx)(L.Z,{variant:"body2",sx:{color:"text.disabled"},children:(0,b.zM)(t)})]})]}),(0,q.jsxs)(U.Z,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[(0,q.jsx)(p.Z,{color:"inherit",variant:"outlined",endIcon:(0,q.jsx)(C.Z,{icon:"eva:arrow-ios-downward-fill"}),onClick:a.onOpen,sx:{textTransform:"capitalize"},children:r}),(0,q.jsx)(p.Z,{color:"inherit",variant:"outlined",startIcon:(0,q.jsx)(C.Z,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),(0,q.jsx)(p.Z,{color:"inherit",variant:"contained",startIcon:(0,q.jsx)(C.Z,{icon:"solar:pen-bold"}),children:"Edit"})]})]}),(0,q.jsx)(N.Z,{open:a.open,onClose:a.onClose,arrow:"top-right",sx:{width:140},children:s.map((function(e){return(0,q.jsx)(I.Z,{selected:e.value===r,onClick:function(){a.onClose(),i(e.value)},children:e.label},e.value)}))})]})}var De=n(36562),Pe=n(35651),ke=n(27454),Re=n(28666),Oe=n(65552),Ae=n(21658),Ie=n(23454);function Te(e){var r=e.history,n=(0,q.jsxs)(U.Z,{spacing:2,component:W.Z,variant:"outlined",sx:{p:2.5,minWidth:260,flexShrink:0,borderRadius:2,typography:"body2",borderStyle:"dashed"},children:[(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Order time"}),(0,b.zM)(r.orderTime)]}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Payment time"}),(0,b.zM)(r.orderTime)]}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Delivery time for the carrier"}),(0,b.zM)(r.orderTime)]}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Completion time"}),(0,b.zM)(r.orderTime)]})]}),o=(0,q.jsx)(De.Z,{sx:(0,t.Z)({p:0,m:0},"& .".concat(Ae.Z.root,":before"),{flex:0,padding:0}),children:r.timeline.map((function(e,n){var t=0===n,o=n===r.timeline.length-1;return(0,q.jsxs)(Ie.Z,{children:[(0,q.jsxs)(Re.Z,{children:[(0,q.jsx)(Pe.Z,{color:t?"primary":"grey"}),o?null:(0,q.jsx)(Oe.Z,{})]}),(0,q.jsxs)(ke.Z,{children:[(0,q.jsx)(L.Z,{variant:"subtitle2",children:e.title}),(0,q.jsx)(O.Z,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:(0,b.zM)(e.time)})]})]},e.title)}))});return(0,q.jsxs)(c.Z,{children:[(0,q.jsx)(fe.Z,{title:"History"}),(0,q.jsxs)(U.Z,{spacing:3,alignItems:{md:"flex-start"},direction:{xs:"column-reverse",md:"row"},sx:{p:3},children:[o,n]})]})}function Fe(e){var r=e.id,n=(0,P.K$)(),t=f._Q.filter((function(e){return e.id===r}))[0],o=(0,d.useState)(t.status),s=(0,a.Z)(o,2),i=s[0],l=s[1],c=(0,d.useCallback)((function(e){l(e)}),[]);return(0,q.jsxs)(u.Z,{maxWidth:!n.themeStretch&&"lg",children:[(0,q.jsx)(Se,{backLink:g.H.dashboard.order.root,orderNumber:t.orderNumber,createdAt:t.createdAt,status:i,onChangeStatus:c,statusOptions:f.s8}),(0,q.jsxs)(je.Z,{container:!0,spacing:3,children:[(0,q.jsx)(je.Z,{xs:12,md:8,children:(0,q.jsxs)(U.Z,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:[(0,q.jsx)(we,{items:t.items,taxes:t.taxes,shipping:t.shipping,discount:t.discount,subTotal:t.subTotal,totalAmount:t.totalAmount}),(0,q.jsx)(Te,{history:t.history})]})}),(0,q.jsx)(je.Z,{xs:12,md:4,children:(0,q.jsx)(be,{customer:t.customer,delivery:t.delivery,payment:t.payment,shippingAddress:t.shippingAddress})})]})]})}var Be=n(12065),Ne=n(61474),We=n(2101);function Ue(e){var r=e.row,n=e.openDialogBox,t=e.setOpenDialogBox,o=e.setOpenAppointmentBox,s=r.dateOrdered,i=r.labOrderId,a=(r.appointmentDate,r.providerContact,r.patientContact,r.providerName,r.labItems);new Date(s).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"});return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(M.Z,{open:n,onClose:function(){return t(!1)},sx:{"& .MuiDialog-paper":{width:"50%",maxWidth:"none",maxHeight:"90vh"}},children:[(0,q.jsx)(_.Z,{align:"center",children:(0,q.jsx)(B.Z,{primary:i,secondary:"General Laboratory Request Form",primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,q.jsx)(H.Z,{children:(0,q.jsxs)(U.Z,{spacing:2,component:W.Z,variant:"outlined",sx:{p:2.5,minWidth:300,flexShrink:0,borderRadius:5,typography:"body1",borderStyle:"dashed"},children:[(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Name"}),r.patientName]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Phone Number"}),null===r||void 0===r?void 0:r.patientContact.phoneNumber]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Patient Email"}),null===r||void 0===r?void 0:r.patientContact.email]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Name"}),r.providerName]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Phone Number"}),null===r||void 0===r?void 0:r.providerContact.phoneNumber]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Provider Email"}),null===r||void 0===r?void 0:r.providerContact.email]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Appointment Date"}),(0,z.Z)(new Date(s),"dd/MM/yyyy")]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Priority"}),r.priority]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Message"}),r.description]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed",my:1,borderColor:"primary.main"}}),(0,q.jsxs)(U.Z,{spacing:.5,children:[(0,q.jsx)(O.Z,{sx:{color:"text.disabled"},children:"Category and Test Type"}),(0,q.jsx)(j.Z,{sx:{border:"0.5px solid #bdbdbd",borderRadius:"10px"},children:(0,q.jsxs)(x.Z,{children:[(0,q.jsx)(G.Z,{children:(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{children:"Category"})," ",(0,q.jsx)(F.Z,{children:"Test"})]})}),(0,q.jsx)(m.Z,{children:a.map((function(e,r){return(0,q.jsxs)(T.Z,{children:[(0,q.jsx)(F.Z,{sx:{borderBottomStyle:"solid"},children:(0,q.jsx)(L.Z,{children:e.category})}),(0,q.jsx)(F.Z,{sx:{borderBottomStyle:"solid"},children:(0,q.jsx)(L.Z,{sx:{color:"primary.main"},children:e.test})})]},r)}))})]})})]})]})}),(0,q.jsxs)(E.Z,{children:[(0,q.jsx)(p.Z,{onClick:function(){return o(!0)},variant:"outlined",color:"inherit",children:"pending"===r.status?"Schedule":"Reschedule"}),(0,q.jsx)(p.Z,{onClick:function(){return t(!1)},variant:"outlined",color:"inherit",children:"Cancel"})]})]})})}function Le(e){var r=e.row,n=e.selected,t=e.onViewRow,o=(e.onSelectRow,e.onDeleteRow),s=e.fetchAllOrders,i=(r.orderNo,r.doctor,r.reqDate,r.labItems),c=r.priority,x=(r.photo,r.status),h=(r.appointmentTime,r._id,r.providerID,r.userID,r.patientName),u=(r.facilityID,r.description,r.appointmentID,r.dateOrdered),m=(r.result,r.feeAmount,r.paid,r.labOrderId),j=(0,v.k)(),g=(0,N.S)(),y=(0,d.useState)(!1),f=(0,a.Z)(y,2),b=f[0],S=f[1],P=(0,d.useState)(!1),k=(0,a.Z)(P,2),R=k[0],W=k[1];console.log(r);var U=(0,l.Z)(new Set(i.map((function(e){return e.category})))),L=(0,q.jsxs)(T.Z,{hover:!0,selected:n,children:[(0,q.jsx)(F.Z,{children:(0,q.jsx)(O.Z,{onClick:t,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"".concat(m)})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(B.Z,{primary:h,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"},sx:{whiteSpace:"nowrap"}})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(B.Z,{primary:(0,z.Z)(new Date(u),"dd/MM/yyyy"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),(0,q.jsx)(F.Z,{align:"center",children:U.join(", ")}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(w.Z,{variant:"soft",color:("approved"===x?"success":"pending"===x&&"warning")||"default",children:x})}),(0,q.jsx)(F.Z,{children:(0,q.jsx)(w.Z,{variant:"soft",color:("regular"===c?"success":"urgent"===c&&"warning")||"emergency"===c&&"error"||"default",children:c})}),(0,q.jsx)(F.Z,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:(0,q.jsx)(Z.Z,{color:g.open?"inherit":"default",onClick:g.onOpen,children:(0,q.jsx)(C.Z,{icon:"eva:more-vertical-fill"})})})]});return(0,q.jsxs)(q.Fragment,{children:[L,(0,q.jsxs)(N.Z,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{width:160},children:[(0,q.jsxs)(I.Z,{onClick:function(){S(!0),g.onClose()},children:[(0,q.jsx)(C.Z,{icon:"solar:eye-bold"}),"View Order"]}),(0,q.jsx)(A.Z,{sx:{borderStyle:"dashed"}}),(0,q.jsxs)(I.Z,{onClick:function(){alert("Cancel Order")},children:[(0,q.jsx)(C.Z,{icon:"flat-color-icons:cancel"}),"Cancel Order"]})]}),(0,q.jsx)(Ue,{row:r,openDialogBox:b,setOpenDialogBox:S,setOpenAppointmentBox:W}),(0,q.jsx)(Y,{openAppointmentBox:R,setOpenAppointmentBox:W,row:r,fetchAllOrders:function(){return s()}}),(0,q.jsx)(D.Q,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:o,children:"Delete"})})]})}var Me=[{value:"all",label:"All"}].concat([{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"cancelled",label:"Cancelled"}]),_e=[{id:"orderNumber",label:"Order",width:120},{id:"name",label:"Patient",width:120},{id:"createdAt",label:"Requested Date (MM/DD/YYYY)",width:120},{id:"totalQuantity",label:"Order Type",width:200,align:"center"},{id:"totalAmount",label:"Status",width:110},{id:"status",label:"Priority",width:110},{id:"",width:88}],Ee={labOrderId:"",status:"all",startDate:null,endDate:null,orderType:""};function He(){var e=(0,R.x6)({defaultOrderBy:"orderNo"}),r=(0,P.K$)(),n=(0,y.tv)(),l=(0,v.k)(),f=(0,d.useState)([]),O=(0,a.Z)(f,2),A=O[0],I=O[1],T=(0,d.useState)(Ee),F=(0,a.Z)(T,2),B=F[0],N=F[1],W=(0,he.E)().user,U=(0,d.useState)([]),L=(0,a.Z)(U,2),M=(L[0],L[1],function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.Z.get("/medical-labs/faclity/pending/".concat(null===W||void 0===W?void 0:W.facilityID));case 3:r=e.sent,n=r.data,I(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}());console.log(A),(0,d.useEffect)((function(){M()}),[]);var _=!(!B.startDate||!B.endDate)&&B.startDate.getTime()>B.endDate.getTime(),E=function(e){var r=e.inputData,n=e.comparator,t=e.filters,o=e.dateError,s=t.status,i=t.startDate,a=t.endDate,l=(t.labOrderId,t.orderType),d=r.map((function(e,r){return[e,r]}));d.sort((function(e,r){var t=n(e[0],r[0]);return 0!==t?t:e[1]-r[1]})),r=d.map((function(e){return e[0]})),l&&(r=r.filter((function(e){return-1!==e.orderType.toLowerCase().indexOf(l.toLowerCase())})));"all"!==s&&(r=r.filter((function(e){return e.status===s})));o||i&&a&&(r=r.filter((function(e){return(0,b.IO)(e.createdAt)>=(0,b.IO)(i)&&(0,b.IO)(e.createdAt)<=(0,b.IO)(a)})));return r}({inputData:A,comparator:(0,R.sQ)(e.order,e.orderBy),filters:B,dateError:_}),H=E.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),z=e.dense?52:72,G=!!B.name||"all"!==B.status||!!B.startDate&&!!B.endDate,V=!E.length&&G||!E.length,K=(0,d.useCallback)((function(r,n){e.onResetPage(),N((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,t.Z)({},r,n))}))}),[e]),$=(0,d.useCallback)((function(r){var n=A.filter((function(e){return e.id!==r}));I(n),e.onUpdatePageDeleteRow(H.length)}),[H.length,e,A]),Y=(0,d.useCallback)((function(){var r=A.filter((function(r){return!e.selected.includes(r.id)}));I(r),e.onUpdatePageDeleteRows({totalRows:A.length,totalRowsInPage:H.length,totalRowsFiltered:E.length})}),[E.length,H.length,e,A]),J=(0,d.useCallback)((function(){N(Ee)}),[]),X=(0,d.useCallback)((function(e){n.push(g.H.dashboard.order.details(e))}),[n]),ee=(0,d.useCallback)((function(e,r){K("status",r)}),[K]);return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(u.Z,{maxWidth:!r.themeStretch&&"lg",children:[(0,q.jsx)(k.Z,{heading:"All Orders",links:[{name:"Dashboard",href:g.H.dashboard.root},{name:"Orders",href:g.H.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),(0,q.jsxs)(c.Z,{children:[(0,q.jsx)(We.Z,{value:B.status,onChange:ee,sx:{px:2.5,boxShadow:function(e){return"inset 0 -2px 0 0 ".concat((0,Be.Fq)(e.palette.grey[500],.08))}},children:Me.map((function(e){return(0,q.jsx)(Ne.Z,{iconPosition:"end",value:e.value,label:e.label,icon:(0,q.jsxs)(w.Z,{variant:"all"===e.value||e.value===B.status?"filled":"soft",color:("approved"===e.value?"success":"pending"===e.value&&"warning")||"cancelled"===e.value&&"error"||"default",children:["all"===e.value&&A.length,"approved"===e.value&&A.filter((function(e){return"approved"===e.status})).length,"pending"===e.value&&A.filter((function(e){return"pending"===e.status})).length,"cancelled"===e.value&&A.filter((function(e){return"cancelled"===e.status})).length]})},e.value)}))}),(0,q.jsx)(se,{filters:B,onFilters:K,canReset:G,onResetFilters:J}),G&&(0,q.jsx)(xe,{filters:B,onFilters:K,onResetFilters:J,results:E.length,sx:{p:2.5,pt:0}}),(0,q.jsxs)(j.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,q.jsx)(R.Z4,{dense:e.dense,numSelected:e.selected.length,rowCount:A.length,onSelectAllRows:function(r){return e.onSelectAllRows(r,A.map((function(e){return e.id})))},action:(0,q.jsx)(h.Z,{title:"Delete",children:(0,q.jsx)(Z.Z,{color:"primary",onClick:l.onTrue,children:(0,q.jsx)(C.Z,{icon:"solar:trash-bin-trash-bold"})})})}),(0,q.jsx)(S.Z,{children:(0,q.jsxs)(x.Z,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[(0,q.jsx)(R.K,{order:e.order,orderBy:e.orderBy,headLabel:_e,rowCount:A.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:function(r){return e.onSelectAllRows(r,A.map((function(e){return e.id})))}}),(0,q.jsxs)(m.Z,{children:[E.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map((function(r){return(0,q.jsx)(Le,{row:r,fetchAllOrders:M,selected:e.selected.includes(r.id),onSelectRow:function(){return e.onSelectRow(r.id)},onDeleteRow:function(){return $(r.id)},onViewRow:function(){return X(r.id)}},r.id)})),(0,q.jsx)(R.$W,{height:z,emptyRows:(0,R.fQ)(e.page,e.rowsPerPage,A.length)}),(0,q.jsx)(R.et,{notFound:V})]})]})})]}),(0,q.jsx)(R.S_,{count:E.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),(0,q.jsx)(D.Q,{open:l.value,onClose:l.onFalse,title:"Delete",content:(0,q.jsxs)(q.Fragment,{children:["Are you sure want to delete"," ",(0,q.jsxs)("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:(0,q.jsx)(p.Z,{variant:"contained",color:"error",onClick:function(){Y(),l.onFalse()},children:"Delete"})})]})}}}]);
//# sourceMappingURL=7289.e938edbc.chunk.js.map